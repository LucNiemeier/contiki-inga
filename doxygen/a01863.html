<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Contiki-Inga 3.x: MicroSD Card Interface</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Contiki-Inga 3.x
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">MicroSD Card Interface<div class="ingroups"><a class="el" href="a01845.html">Device Drivers</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>This driver provides the following main features:  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:a01495"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01495.html">sdcard.c</a></td></tr>
<tr class="memdesc:a01495"><td class="mdescLeft">&#160;</td><td class="mdescRight"><pre class="fragment"> SD Card interface implementation
</pre> <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gae76b6b5af0e8a7bbf34d78e83de90ed4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gae76b6b5af0e8a7bbf34d78e83de90ed4"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#gae76b6b5af0e8a7bbf34d78e83de90ed4">SDCARD_CMD0</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:gae76b6b5af0e8a7bbf34d78e83de90ed4"><td class="mdescLeft">&#160;</td><td class="mdescRight">CMD0 &ndash; GO_IDLE_STATE. <br/></td></tr>
<tr class="separator:gae76b6b5af0e8a7bbf34d78e83de90ed4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa264a4dcd29cc835848efdf2508e615e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaa264a4dcd29cc835848efdf2508e615e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#gaa264a4dcd29cc835848efdf2508e615e">SDCARD_CMD1</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:gaa264a4dcd29cc835848efdf2508e615e"><td class="mdescLeft">&#160;</td><td class="mdescRight">CMD1 &ndash; SEND_OP_COND. <br/></td></tr>
<tr class="separator:gaa264a4dcd29cc835848efdf2508e615e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad0fdf496b9e4478138b1baf2acfe31e4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gad0fdf496b9e4478138b1baf2acfe31e4"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#gad0fdf496b9e4478138b1baf2acfe31e4">SDCARD_CMD8</a>&#160;&#160;&#160;8</td></tr>
<tr class="memdesc:gad0fdf496b9e4478138b1baf2acfe31e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">CMD8 &ndash; SEND_IF_COND (deprecated?) <br/></td></tr>
<tr class="separator:gad0fdf496b9e4478138b1baf2acfe31e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9c70cbfab79e2301f7c31f1e6f000252"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga9c70cbfab79e2301f7c31f1e6f000252"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#ga9c70cbfab79e2301f7c31f1e6f000252">SDCARD_CMD9</a>&#160;&#160;&#160;9</td></tr>
<tr class="memdesc:ga9c70cbfab79e2301f7c31f1e6f000252"><td class="mdescLeft">&#160;</td><td class="mdescRight">CMD9 &ndash; SEND_CSD. <br/></td></tr>
<tr class="separator:ga9c70cbfab79e2301f7c31f1e6f000252"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1ca0eec5d4c05eb29d1cc5f4162fce52"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga1ca0eec5d4c05eb29d1cc5f4162fce52"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#ga1ca0eec5d4c05eb29d1cc5f4162fce52">SDCARD_CMD10</a>&#160;&#160;&#160;10</td></tr>
<tr class="memdesc:ga1ca0eec5d4c05eb29d1cc5f4162fce52"><td class="mdescLeft">&#160;</td><td class="mdescRight">CMD10 &ndash; SEND_CID. <br/></td></tr>
<tr class="separator:ga1ca0eec5d4c05eb29d1cc5f4162fce52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3414b7b8b72a46fc0cfcdeb73c9e8715"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga3414b7b8b72a46fc0cfcdeb73c9e8715"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#ga3414b7b8b72a46fc0cfcdeb73c9e8715">SDCARD_CMD13</a>&#160;&#160;&#160;13</td></tr>
<tr class="memdesc:ga3414b7b8b72a46fc0cfcdeb73c9e8715"><td class="mdescLeft">&#160;</td><td class="mdescRight">CMD13 &ndash; SEND_STATUS. <br/></td></tr>
<tr class="separator:ga3414b7b8b72a46fc0cfcdeb73c9e8715"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad98e1bfe9ff4bb13d1622b1e3f04b304"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gad98e1bfe9ff4bb13d1622b1e3f04b304"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#gad98e1bfe9ff4bb13d1622b1e3f04b304">SDCARD_CMD16</a>&#160;&#160;&#160;16</td></tr>
<tr class="memdesc:gad98e1bfe9ff4bb13d1622b1e3f04b304"><td class="mdescLeft">&#160;</td><td class="mdescRight">CMD16 &ndash; SET_BLOCKLEN. <br/></td></tr>
<tr class="separator:gad98e1bfe9ff4bb13d1622b1e3f04b304"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1708428ff2fc5a7ed959ad0c760f600b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga1708428ff2fc5a7ed959ad0c760f600b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#ga1708428ff2fc5a7ed959ad0c760f600b">SDCARD_CMD17</a>&#160;&#160;&#160;17</td></tr>
<tr class="memdesc:ga1708428ff2fc5a7ed959ad0c760f600b"><td class="mdescLeft">&#160;</td><td class="mdescRight">CMD17 &ndash; READ_SINGLE_BLOCK. <br/></td></tr>
<tr class="separator:ga1708428ff2fc5a7ed959ad0c760f600b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga56259aa71c93293f92b035e12b7d95ab"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga56259aa71c93293f92b035e12b7d95ab"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#ga56259aa71c93293f92b035e12b7d95ab">SDCARD_CMD18</a>&#160;&#160;&#160;18</td></tr>
<tr class="memdesc:ga56259aa71c93293f92b035e12b7d95ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">CMD18 &ndash; READ_MULTIPLE_BLOCK. <br/></td></tr>
<tr class="separator:ga56259aa71c93293f92b035e12b7d95ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga16c2ddda5a07b0692360828eecffd186"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga16c2ddda5a07b0692360828eecffd186"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#ga16c2ddda5a07b0692360828eecffd186">SDCARD_CMD24</a>&#160;&#160;&#160;24</td></tr>
<tr class="memdesc:ga16c2ddda5a07b0692360828eecffd186"><td class="mdescLeft">&#160;</td><td class="mdescRight">CMD24 &ndash; WRITE_BLOCK. <br/></td></tr>
<tr class="separator:ga16c2ddda5a07b0692360828eecffd186"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab80176a2033832b396566cdbeeac9176"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gab80176a2033832b396566cdbeeac9176"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#gab80176a2033832b396566cdbeeac9176">SDCARD_CMD25</a>&#160;&#160;&#160;25</td></tr>
<tr class="memdesc:gab80176a2033832b396566cdbeeac9176"><td class="mdescLeft">&#160;</td><td class="mdescRight">CMD25 &ndash; WRITE_MULTIPLE_BLOCK. <br/></td></tr>
<tr class="separator:gab80176a2033832b396566cdbeeac9176"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab8512564a1b7d9773d219c398726d197"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gab8512564a1b7d9773d219c398726d197"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#gab8512564a1b7d9773d219c398726d197">SDCARD_CMD27</a>&#160;&#160;&#160;27</td></tr>
<tr class="memdesc:gab8512564a1b7d9773d219c398726d197"><td class="mdescLeft">&#160;</td><td class="mdescRight">CMD27 &ndash; PROGRAM_CSD. <br/></td></tr>
<tr class="separator:gab8512564a1b7d9773d219c398726d197"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8485824bab526bf757beb76543108b5f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga8485824bab526bf757beb76543108b5f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#ga8485824bab526bf757beb76543108b5f">SDCARD_CMD32</a>&#160;&#160;&#160;32</td></tr>
<tr class="memdesc:ga8485824bab526bf757beb76543108b5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">CMD32 &ndash; ERASE_WR_BLK_START_ADDR. <br/></td></tr>
<tr class="separator:ga8485824bab526bf757beb76543108b5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeb5e32cd641a5ca20ba1ed2a90e2045e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaeb5e32cd641a5ca20ba1ed2a90e2045e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#gaeb5e32cd641a5ca20ba1ed2a90e2045e">SDCARD_CMD33</a>&#160;&#160;&#160;33</td></tr>
<tr class="memdesc:gaeb5e32cd641a5ca20ba1ed2a90e2045e"><td class="mdescLeft">&#160;</td><td class="mdescRight">CMD33 &ndash; ERASE_WR_BLK_END_ADDR. <br/></td></tr>
<tr class="separator:gaeb5e32cd641a5ca20ba1ed2a90e2045e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa8fc3f6c36c9003838dd7fd5fa5d2d38"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaa8fc3f6c36c9003838dd7fd5fa5d2d38"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#gaa8fc3f6c36c9003838dd7fd5fa5d2d38">SDCARD_CMD38</a>&#160;&#160;&#160;38</td></tr>
<tr class="memdesc:gaa8fc3f6c36c9003838dd7fd5fa5d2d38"><td class="mdescLeft">&#160;</td><td class="mdescRight">CMD38 &ndash; ERASE. <br/></td></tr>
<tr class="separator:gaa8fc3f6c36c9003838dd7fd5fa5d2d38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7ebf9c9f8bcfc4edb4cf6511e13564b2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga7ebf9c9f8bcfc4edb4cf6511e13564b2"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#ga7ebf9c9f8bcfc4edb4cf6511e13564b2">SDCARD_CMD58</a>&#160;&#160;&#160;58</td></tr>
<tr class="memdesc:ga7ebf9c9f8bcfc4edb4cf6511e13564b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">CMD58 &ndash; READ_OCR. <br/></td></tr>
<tr class="separator:ga7ebf9c9f8bcfc4edb4cf6511e13564b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5dafb08c4afc5b1cb71393480adf68c3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga5dafb08c4afc5b1cb71393480adf68c3"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#ga5dafb08c4afc5b1cb71393480adf68c3">SDCARD_CMD59</a>&#160;&#160;&#160;59</td></tr>
<tr class="memdesc:ga5dafb08c4afc5b1cb71393480adf68c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">CMD59 &ndash; CRC_ON_OFF. <br/></td></tr>
<tr class="separator:ga5dafb08c4afc5b1cb71393480adf68c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad872f0304f1e8ee64eb32111d4b91406"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gad872f0304f1e8ee64eb32111d4b91406"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#gad872f0304f1e8ee64eb32111d4b91406">SDCARD_CMD55</a>&#160;&#160;&#160;55</td></tr>
<tr class="memdesc:gad872f0304f1e8ee64eb32111d4b91406"><td class="mdescLeft">&#160;</td><td class="mdescRight">CMD55 &ndash; APP_CMD. <br/></td></tr>
<tr class="separator:gad872f0304f1e8ee64eb32111d4b91406"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gade43cff4bc39a53c24be2b7ce7ca0aa8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gade43cff4bc39a53c24be2b7ce7ca0aa8"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#gade43cff4bc39a53c24be2b7ce7ca0aa8">SDCARD_ACMD23</a>&#160;&#160;&#160;(IS_ACMD | 23)</td></tr>
<tr class="memdesc:gade43cff4bc39a53c24be2b7ce7ca0aa8"><td class="mdescLeft">&#160;</td><td class="mdescRight">ACMD23 &ndash; SET_WR_BLK_ERASE_COUNT. <br/></td></tr>
<tr class="separator:gade43cff4bc39a53c24be2b7ce7ca0aa8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga573b99f7a622b6e93f535c05a452079e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga573b99f7a622b6e93f535c05a452079e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#ga573b99f7a622b6e93f535c05a452079e">SDCARD_ACMD41</a>&#160;&#160;&#160;(IS_ACMD | 41)</td></tr>
<tr class="memdesc:ga573b99f7a622b6e93f535c05a452079e"><td class="mdescLeft">&#160;</td><td class="mdescRight">ACMD41 &ndash; SD_SEND_OP_COND. <br/></td></tr>
<tr class="separator:ga573b99f7a622b6e93f535c05a452079e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0dbeed2c5f53b1e2a82be0e5be5b09eb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#ga0dbeed2c5f53b1e2a82be0e5be5b09eb">MICRO_SD_CS</a>&#160;&#160;&#160;5</td></tr>
<tr class="separator:ga0dbeed2c5f53b1e2a82be0e5be5b09eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga6d8adcd07f74d40c3c4c712befd1f85b"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#ga6d8adcd07f74d40c3c4c712befd1f85b">sdcard_get_card_size</a> ()</td></tr>
<tr class="memdesc:ga6d8adcd07f74d40c3c4c712befd1f85b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns card size.  <a href="#ga6d8adcd07f74d40c3c4c712befd1f85b">More...</a><br/></td></tr>
<tr class="separator:ga6d8adcd07f74d40c3c4c712befd1f85b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf5985b6f2f0b82cf5fc15565b1b31a2d"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#gaf5985b6f2f0b82cf5fc15565b1b31a2d">sdcard_get_block_num</a> ()</td></tr>
<tr class="separator:gaf5985b6f2f0b82cf5fc15565b1b31a2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga60952639ea126a5b2e5b9868a07147df"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#ga60952639ea126a5b2e5b9868a07147df">sdcard_get_block_size</a> ()</td></tr>
<tr class="memdesc:ga60952639ea126a5b2e5b9868a07147df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the size of one block in bytes.  <a href="#ga60952639ea126a5b2e5b9868a07147df">More...</a><br/></td></tr>
<tr class="separator:ga60952639ea126a5b2e5b9868a07147df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacf8efbbd986a55691dfed26b4a4cf70a"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#gacf8efbbd986a55691dfed26b4a4cf70a">sdcard_is_SDSC</a> ()</td></tr>
<tr class="memdesc:gacf8efbbd986a55691dfed26b4a4cf70a"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function indicates if a card is a SDSC or SDHC/SDXC card.  <a href="#gacf8efbbd986a55691dfed26b4a4cf70a">More...</a><br/></td></tr>
<tr class="separator:gacf8efbbd986a55691dfed26b4a4cf70a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa28193bba64d05c69b3ee58d2501101a"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#gaa28193bba64d05c69b3ee58d2501101a">sdcard_set_CRC</a> (uint8_t enable)</td></tr>
<tr class="memdesc:gaa28193bba64d05c69b3ee58d2501101a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turns crc capabilities of the card on or off.  <a href="#gaa28193bba64d05c69b3ee58d2501101a">More...</a><br/></td></tr>
<tr class="separator:gaa28193bba64d05c69b3ee58d2501101a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf5e6bd293638f2c44d9bddccdf240c08"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#gaf5e6bd293638f2c44d9bddccdf240c08">sdcard_read_csd</a> (uint8_t *buffer)</td></tr>
<tr class="memdesc:gaf5e6bd293638f2c44d9bddccdf240c08"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function will read the CSD (16 Bytes) of the SD-Card.  <a href="#gaf5e6bd293638f2c44d9bddccdf240c08">More...</a><br/></td></tr>
<tr class="separator:gaf5e6bd293638f2c44d9bddccdf240c08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7bf41a61b95f8c3e6c77d31f7759634f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#ga7bf41a61b95f8c3e6c77d31f7759634f">sdcard_cmd_crc</a> (uint8_t *cmd)</td></tr>
<tr class="memdesc:ga7bf41a61b95f8c3e6c77d31f7759634f"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function calculates the CRC7 for SD Card commands.  <a href="#ga7bf41a61b95f8c3e6c77d31f7759634f">More...</a><br/></td></tr>
<tr class="separator:ga7bf41a61b95f8c3e6c77d31f7759634f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6319f1df2a27715700142b382b61d17d"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#ga6319f1df2a27715700142b382b61d17d">sdcard_data_crc</a> (uint8_t *data)</td></tr>
<tr class="memdesc:ga6319f1df2a27715700142b382b61d17d"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function calculates the CRC16 for a 512 Byte data block.  <a href="#ga6319f1df2a27715700142b382b61d17d">More...</a><br/></td></tr>
<tr class="separator:ga6319f1df2a27715700142b382b61d17d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacf47901f5b4b624afafb02d59e04ce9c"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#gacf47901f5b4b624afafb02d59e04ce9c">sdcard_init</a> (void)</td></tr>
<tr class="memdesc:gacf47901f5b4b624afafb02d59e04ce9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the SD Card.  <a href="#gacf47901f5b4b624afafb02d59e04ce9c">More...</a><br/></td></tr>
<tr class="separator:gacf47901f5b4b624afafb02d59e04ce9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7f2c293b04b8be31e9dd16905e2e3fe7"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#ga7f2c293b04b8be31e9dd16905e2e3fe7">sdcard_erase_blocks</a> (uint32_t startaddr, uint32_t endaddr)</td></tr>
<tr class="separator:ga7f2c293b04b8be31e9dd16905e2e3fe7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9bf40a8b2342c85390d5efb4eb0cf63f"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#ga9bf40a8b2342c85390d5efb4eb0cf63f">sdcard_read_block</a> (uint32_t addr, uint8_t *buffer)</td></tr>
<tr class="memdesc:ga9bf40a8b2342c85390d5efb4eb0cf63f"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function will read one block (512, 1024, 2048 or 4096Byte) of the SD-Card.  <a href="#ga9bf40a8b2342c85390d5efb4eb0cf63f">More...</a><br/></td></tr>
<tr class="separator:ga9bf40a8b2342c85390d5efb4eb0cf63f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaab018ecec7da52ff9373d35a7091dd42"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#gaab018ecec7da52ff9373d35a7091dd42">sdcard_write_block</a> (uint32_t addr, uint8_t *buffer)</td></tr>
<tr class="memdesc:gaab018ecec7da52ff9373d35a7091dd42"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function will write one block (512, 1024, 2048 or 4096Byte) of the SD-Card.  <a href="#gaab018ecec7da52ff9373d35a7091dd42">More...</a><br/></td></tr>
<tr class="separator:gaab018ecec7da52ff9373d35a7091dd42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8e0f2a21d319efdcbe772b5f8abc8f04"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#ga8e0f2a21d319efdcbe772b5f8abc8f04">sdcard_write_multi_block_start</a> (uint32_t addr, uint32_t num_blocks)</td></tr>
<tr class="memdesc:ga8e0f2a21d319efdcbe772b5f8abc8f04"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepares to write multiple blocks sequentially.  <a href="#ga8e0f2a21d319efdcbe772b5f8abc8f04">More...</a><br/></td></tr>
<tr class="separator:ga8e0f2a21d319efdcbe772b5f8abc8f04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga30f82b5509c4c990a75d65fa9bcb4020"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#ga30f82b5509c4c990a75d65fa9bcb4020">sdcard_write_multi_block_next</a> (uint8_t *buffer)</td></tr>
<tr class="memdesc:ga30f82b5509c4c990a75d65fa9bcb4020"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes single of multiple sequental blocks.  <a href="#ga30f82b5509c4c990a75d65fa9bcb4020">More...</a><br/></td></tr>
<tr class="separator:ga30f82b5509c4c990a75d65fa9bcb4020"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9e99df8d7809d6ee7cd9d330375a2efa"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#ga9e99df8d7809d6ee7cd9d330375a2efa">sdcard_write_multi_block_stop</a> ()</td></tr>
<tr class="memdesc:ga9e99df8d7809d6ee7cd9d330375a2efa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops multiple block write.  <a href="#ga9e99df8d7809d6ee7cd9d330375a2efa">More...</a><br/></td></tr>
<tr class="separator:ga9e99df8d7809d6ee7cd9d330375a2efa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga241f63fa7a56cec25729ad317ec5ce95"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#ga241f63fa7a56cec25729ad317ec5ce95">sdcard_write_cmd</a> (uint8_t cmd, uint32_t *arg, uint8_t *resp)</td></tr>
<tr class="memdesc:ga241f63fa7a56cec25729ad317ec5ce95"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function sends a command via SPI to the SD-Card.  <a href="#ga241f63fa7a56cec25729ad317ec5ce95">More...</a><br/></td></tr>
<tr class="separator:ga241f63fa7a56cec25729ad317ec5ce95"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Interface return codes</h2></td></tr>
<tr class="memitem:ga7d45856a5b2e876ca9ef2fdf540411bd"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga7d45856a5b2e876ca9ef2fdf540411bd"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#ga7d45856a5b2e876ca9ef2fdf540411bd">SDCARD_SUCCESS</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:ga7d45856a5b2e876ca9ef2fdf540411bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Successfully completed operation. <br/></td></tr>
<tr class="separator:ga7d45856a5b2e876ca9ef2fdf540411bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga35d62478de2785d4a3986fc44403395f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga35d62478de2785d4a3986fc44403395f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#ga35d62478de2785d4a3986fc44403395f">SDCARD_REJECTED</a>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:ga35d62478de2785d4a3986fc44403395f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates the host cannot handle this card, maybe due to rejected voltage range. <br/></td></tr>
<tr class="separator:ga35d62478de2785d4a3986fc44403395f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8d755972aa61b9238ec6cf33a4623261"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga8d755972aa61b9238ec6cf33a4623261"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#ga8d755972aa61b9238ec6cf33a4623261">SDCARD_CMD_TIMEOUT</a>&#160;&#160;&#160;4</td></tr>
<tr class="memdesc:ga8d755972aa61b9238ec6cf33a4623261"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timeout while trying to send command. <br/></td></tr>
<tr class="separator:ga8d755972aa61b9238ec6cf33a4623261"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7ee598c8eebc3e6696017f98f122b67e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga7ee598c8eebc3e6696017f98f122b67e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#ga7ee598c8eebc3e6696017f98f122b67e">SDCARD_CMD_ERROR</a>&#160;&#160;&#160;3</td></tr>
<tr class="memdesc:ga7ee598c8eebc3e6696017f98f122b67e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Card sent an error response. <br/></td></tr>
<tr class="separator:ga7ee598c8eebc3e6696017f98f122b67e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabeed47df464253d692a5b087a921d945"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gabeed47df464253d692a5b087a921d945"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#gabeed47df464253d692a5b087a921d945">SDCARD_DATA_TIMEOUT</a>&#160;&#160;&#160;6</td></tr>
<tr class="memdesc:gabeed47df464253d692a5b087a921d945"><td class="mdescLeft">&#160;</td><td class="mdescRight">Card did not send a data start byte to indicate beginning of a data block. <br/></td></tr>
<tr class="separator:gabeed47df464253d692a5b087a921d945"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1de3dfbe3f1af35f0f047570873f8f08"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#ga1de3dfbe3f1af35f0f047570873f8f08">SDCARD_DATA_ERROR</a>&#160;&#160;&#160;7</td></tr>
<tr class="memdesc:ga1de3dfbe3f1af35f0f047570873f8f08"><td class="mdescLeft">&#160;</td><td class="mdescRight">Card returned error when trying to read or write data.  <a href="#ga1de3dfbe3f1af35f0f047570873f8f08">More...</a><br/></td></tr>
<tr class="separator:ga1de3dfbe3f1af35f0f047570873f8f08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7148cdcccb1abce67e03839a76a23b53"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga7148cdcccb1abce67e03839a76a23b53"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#ga7148cdcccb1abce67e03839a76a23b53">SDCARD_BUSY_TIMEOUT</a>&#160;&#160;&#160;8</td></tr>
<tr class="memdesc:ga7148cdcccb1abce67e03839a76a23b53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Busy waiting timed out (card held down data line too long) <br/></td></tr>
<tr class="separator:ga7148cdcccb1abce67e03839a76a23b53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabddd2102fef1a873098ce8b901e679fc"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gabddd2102fef1a873098ce8b901e679fc"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01863.html#gabddd2102fef1a873098ce8b901e679fc">SDCARD_CSD_ERROR</a>&#160;&#160;&#160;10</td></tr>
<tr class="memdesc:gabddd2102fef1a873098ce8b901e679fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Failed reading CSD register. <br/></td></tr>
<tr class="separator:gabddd2102fef1a873098ce8b901e679fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This driver provides the following main features: </p>
<ul>
<li>single block read</li>
<li>single block write</li>
<li>multi block write</li>
</ul>
<p>Note that multiple bock write is faster than single block write but only writes sequential block numbers</p>
<dl class="section note"><dt>Note</dt><dd>CRC functionality is not fully implemented thus it sould not be used yet.</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Ulf Kulau <a href="#" onclick="location.href='mai'+'lto:'+'kul'+'au'+'@ib'+'r.'+'cs.'+'tu'+'-bs'+'.d'+'e'; return false;">kulau<span style="display: none;">.nosp@m.</span>@ibr<span style="display: none;">.nosp@m.</span>.cs.t<span style="display: none;">.nosp@m.</span>u-bs<span style="display: none;">.nosp@m.</span>.de</a> Christoph Peltz <a href="#" onclick="location.href='mai'+'lto:'+'pel'+'tz'+'@ib'+'r.'+'cs.'+'tu'+'-bs'+'.d'+'e'; return false;">peltz<span style="display: none;">.nosp@m.</span>@ibr<span style="display: none;">.nosp@m.</span>.cs.t<span style="display: none;">.nosp@m.</span>u-bs<span style="display: none;">.nosp@m.</span>.de</a> Enrico Joerns <a href="#" onclick="location.href='mai'+'lto:'+'joe'+'rn'+'s@i'+'br'+'.cs'+'.t'+'u-b'+'s.'+'de'; return false;">joern<span style="display: none;">.nosp@m.</span>s@ib<span style="display: none;">.nosp@m.</span>r.cs.<span style="display: none;">.nosp@m.</span>tu-b<span style="display: none;">.nosp@m.</span>s.de</a> </dd></dl>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga0dbeed2c5f53b1e2a82be0e5be5b09eb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MICRO_SD_CS&#160;&#160;&#160;5</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>SPI device order. The chip select number where the sdcard-Card is connected to the BCD-decimal decoder </p>

<p>Definition at line <a class="el" href="a00565_source.html#l00075">75</a> of file <a class="el" href="a00565_source.html">sdcard.h</a>.</p>

<p>Referenced by <a class="el" href="a01495_source.html#l00683">sdcard_erase_blocks()</a>, <a class="el" href="a01495_source.html#l00524">sdcard_init()</a>, <a class="el" href="a01495_source.html#l00728">sdcard_read_block()</a>, <a class="el" href="a01495_source.html#l00362">sdcard_read_csd()</a>, <a class="el" href="a01495_source.html#l00343">sdcard_set_CRC()</a>, <a class="el" href="a01495_source.html#l00805">sdcard_write_block()</a>, <a class="el" href="a01495_source.html#l00910">sdcard_write_multi_block_next()</a>, <a class="el" href="a01495_source.html#l00874">sdcard_write_multi_block_start()</a>, and <a class="el" href="a01495_source.html#l00960">sdcard_write_multi_block_stop()</a>.</p>

</div>
</div>
<a class="anchor" id="ga1de3dfbe3f1af35f0f047570873f8f08"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SDCARD_DATA_ERROR&#160;&#160;&#160;7</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Card returned error when trying to read or write data. </p>
<p>Obtained from data response (write) or data error response (read) token </p>

<p>Definition at line <a class="el" href="a00565_source.html#l00093">93</a> of file <a class="el" href="a00565_source.html">sdcard.h</a>.</p>

<p>Referenced by <a class="el" href="a01495_source.html#l00728">sdcard_read_block()</a>, <a class="el" href="a01495_source.html#l00362">sdcard_read_csd()</a>, <a class="el" href="a01495_source.html#l00805">sdcard_write_block()</a>, and <a class="el" href="a01495_source.html#l00910">sdcard_write_multi_block_next()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga7bf41a61b95f8c3e6c77d31f7759634f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sdcard_cmd_crc </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>cmd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function calculates the CRC7 for SD Card commands. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*cmd</td><td>The array containing the command with every byte except the CRC byte correctly set. The CRC part will be written into the cmd array (at the correct position). </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a01495_source.html#l00475">475</a> of file <a class="el" href="a01495_source.html">sdcard.c</a>.</p>

<p>Referenced by <a class="el" href="a01495_source.html#l01000">sdcard_write_cmd()</a>.</p>

</div>
</div>
<a class="anchor" id="ga6319f1df2a27715700142b382b61d17d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t sdcard_data_crc </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function calculates the CRC16 for a 512 Byte data block. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*data</td><td>The array containing the data to be send. Must be 512 Bytes long. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The CRC16 code for the given data. </dd></dl>

<p>Definition at line <a class="el" href="a01495_source.html#l00499">499</a> of file <a class="el" href="a01495_source.html">sdcard.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga7f2c293b04b8be31e9dd16905e2e3fe7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t sdcard_erase_blocks </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>startaddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>endaddr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section note"><dt>Note</dt><dd>Not implemented </dd></dl>

<p>Definition at line <a class="el" href="a01495_source.html#l00683">683</a> of file <a class="el" href="a01495_source.html">sdcard.c</a>.</p>

<p>References <a class="el" href="a00565_source.html#l00075">MICRO_SD_CS</a>, <a class="el" href="a01491_source.html#l00145">mspi_chip_release()</a>, <a class="el" href="a01491_source.html#l00131">mspi_chip_select()</a>, <a class="el" href="a01200_source.html#l00186">NULL</a>, <a class="el" href="a01495_source.html#l00101">SDCARD_CMD32</a>, <a class="el" href="a01495_source.html#l00103">SDCARD_CMD33</a>, <a class="el" href="a01495_source.html#l00105">SDCARD_CMD38</a>, <a class="el" href="a00565_source.html#l00081">SDCARD_SUCCESS</a>, and <a class="el" href="a01495_source.html#l01000">sdcard_write_cmd()</a>.</p>

</div>
</div>
<a class="anchor" id="gaf5985b6f2f0b82cf5fc15565b1b31a2d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t sdcard_get_block_num </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>number of blocks </dd></dl>

<p>Definition at line <a class="el" href="a01495_source.html#l00325">325</a> of file <a class="el" href="a01495_source.html">sdcard.c</a>.</p>

<p>References <a class="el" href="a01495_source.html#l00331">sdcard_get_block_size()</a>.</p>

</div>
</div>
<a class="anchor" id="ga60952639ea126a5b2e5b9868a07147df"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t sdcard_get_block_size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the size of one block in bytes. </p>
<p>Mainly used to calculated size of the SD-Card together with sdcard_get_card_block_count().</p>
<dl class="section note"><dt>Note</dt><dd>It's fixed at 512 Bytes.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Number of Bytes in one Block. </dd></dl>

<p>Definition at line <a class="el" href="a01495_source.html#l00331">331</a> of file <a class="el" href="a01495_source.html">sdcard.c</a>.</p>

<p>Referenced by <a class="el" href="a01495_source.html#l00325">sdcard_get_block_num()</a>.</p>

</div>
</div>
<a class="anchor" id="ga6d8adcd07f74d40c3c4c712befd1f85b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t sdcard_get_card_size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns card size. </p>
<dl class="section return"><dt>Returns</dt><dd>card size in bytes </dd></dl>

<p>Definition at line <a class="el" href="a01495_source.html#l00319">319</a> of file <a class="el" href="a01495_source.html">sdcard.c</a>.</p>

</div>
</div>
<a class="anchor" id="gacf47901f5b4b624afafb02d59e04ce9c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t sdcard_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the SD Card. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">SDCARD_SUCCESS</td><td>SD-Card was initialized without an error </td></tr>
    <tr><td class="paramname">SDCARD_CMD_ERROR</td><td></td></tr>
    <tr><td class="paramname">SDCARD_CMD_TIMEOUT</td><td></td></tr>
    <tr><td class="paramname">SDCARD_REJECTED</td><td></td></tr>
    <tr><td class="paramname">SDCARD_CSD_ERROR</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a01495_source.html#l00524">524</a> of file <a class="el" href="a01495_source.html">sdcard.c</a>.</p>

<p>References <a class="el" href="a00565_source.html#l00075">MICRO_SD_CS</a>, <a class="el" href="a01492_source.html#l00139">MSPI_BAUD_2MBPS</a>, <a class="el" href="a01491_source.html#l00145">mspi_chip_release()</a>, <a class="el" href="a01491_source.html#l00131">mspi_chip_select()</a>, <a class="el" href="a01491_source.html#l00109">mspi_init()</a>, <a class="el" href="a01492_source.html#l00100">MSPI_MODE_0</a>, <a class="el" href="a01491_source.html#l00152">mspi_transceive()</a>, <a class="el" href="a01200_source.html#l00186">NULL</a>, <a class="el" href="a00473_source.html#l00093">process_alloc_event()</a>, <a class="el" href="a00473_source.html#l00099">process_start()</a>, <a class="el" href="a01495_source.html#l00119">SDCARD_ACMD41</a>, <a class="el" href="a01495_source.html#l00071">SDCARD_CMD0</a>, <a class="el" href="a01495_source.html#l00073">SDCARD_CMD1</a>, <a class="el" href="a01495_source.html#l00085">SDCARD_CMD16</a>, <a class="el" href="a01495_source.html#l00108">SDCARD_CMD58</a>, <a class="el" href="a01495_source.html#l00075">SDCARD_CMD8</a>, <a class="el" href="a00565_source.html#l00088">SDCARD_CMD_ERROR</a>, <a class="el" href="a00565_source.html#l00086">SDCARD_CMD_TIMEOUT</a>, <a class="el" href="a00565_source.html#l00097">SDCARD_CSD_ERROR</a>, <a class="el" href="a01495_source.html#l00362">sdcard_read_csd()</a>, <a class="el" href="a00565_source.html#l00084">SDCARD_REJECTED</a>, <a class="el" href="a00565_source.html#l00081">SDCARD_SUCCESS</a>, and <a class="el" href="a01495_source.html#l01000">sdcard_write_cmd()</a>.</p>

</div>
</div>
<a class="anchor" id="gacf8efbbd986a55691dfed26b4a4cf70a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t sdcard_is_SDSC </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function indicates if a card is a SDSC or SDHC/SDXC card. </p>
<dl class="section note"><dt>Note</dt><dd><a class="el" href="a01863.html#gacf47901f5b4b624afafb02d59e04ce9c" title="Initializes the SD Card.">sdcard_init()</a> must be called beforehand and be successful before this functions return value has any meaning.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Not 0 if the card is SDSC and 0 if SDHC/SDXC </dd></dl>

<p>Definition at line <a class="el" href="a01495_source.html#l00337">337</a> of file <a class="el" href="a01495_source.html">sdcard.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga9bf40a8b2342c85390d5efb4eb0cf63f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t sdcard_read_block </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function will read one block (512, 1024, 2048 or 4096Byte) of the SD-Card. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>Block address </td></tr>
    <tr><td class="paramname">*buffer</td><td>Pointer to a block buffer (needs to be as long as <a class="el" href="a01863.html#ga60952639ea126a5b2e5b9868a07147df" title="Returns the size of one block in bytes.">sdcard_get_block_size()</a>).</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">SDCARD_SUCCESS</td><td>SD-Card block read was successful </td></tr>
    <tr><td class="paramname">SDCARD_CMD_ERROR</td><td>CMD17 failure </td></tr>
    <tr><td class="paramname">SDCARD_BUSY_TIMEOUT</td><td></td></tr>
    <tr><td class="paramname">SDCARD_DATA_TIMEOUT</td><td></td></tr>
    <tr><td class="paramname">SDCARD_DATA_ERROR</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a01495_source.html#l00728">728</a> of file <a class="el" href="a01495_source.html">sdcard.c</a>.</p>

<p>References <a class="el" href="a00565_source.html#l00075">MICRO_SD_CS</a>, <a class="el" href="a01491_source.html#l00145">mspi_chip_release()</a>, <a class="el" href="a01491_source.html#l00131">mspi_chip_select()</a>, <a class="el" href="a01491_source.html#l00152">mspi_transceive()</a>, <a class="el" href="a01200_source.html#l00186">NULL</a>, <a class="el" href="a00565_source.html#l00095">SDCARD_BUSY_TIMEOUT</a>, <a class="el" href="a01495_source.html#l00088">SDCARD_CMD17</a>, <a class="el" href="a00565_source.html#l00088">SDCARD_CMD_ERROR</a>, <a class="el" href="a00565_source.html#l00093">SDCARD_DATA_ERROR</a>, <a class="el" href="a00565_source.html#l00090">SDCARD_DATA_TIMEOUT</a>, <a class="el" href="a00565_source.html#l00081">SDCARD_SUCCESS</a>, and <a class="el" href="a01495_source.html#l01000">sdcard_write_cmd()</a>.</p>

</div>
</div>
<a class="anchor" id="gaf5e6bd293638f2c44d9bddccdf240c08"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t sdcard_read_csd </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function will read the CSD (16 Bytes) of the SD-Card. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*buffer</td><td>Pointer to a block buffer, MUST hold at least 16 Bytes.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">SDCARD_SUCCESS</td><td>SD-Card CSD read was successful </td></tr>
    <tr><td class="paramname">SDCARD_CMD_ERROR</td><td>CMD9 failure. </td></tr>
    <tr><td class="paramname">SDCARD_DATA_TIMEOUT</td><td></td></tr>
    <tr><td class="paramname">SDCARD_DATA_ERROR</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a01495_source.html#l00362">362</a> of file <a class="el" href="a01495_source.html">sdcard.c</a>.</p>

<p>References <a class="el" href="a00565_source.html#l00075">MICRO_SD_CS</a>, <a class="el" href="a01491_source.html#l00145">mspi_chip_release()</a>, <a class="el" href="a01491_source.html#l00131">mspi_chip_select()</a>, <a class="el" href="a01491_source.html#l00152">mspi_transceive()</a>, <a class="el" href="a01200_source.html#l00186">NULL</a>, <a class="el" href="a01495_source.html#l00078">SDCARD_CMD9</a>, <a class="el" href="a00565_source.html#l00088">SDCARD_CMD_ERROR</a>, <a class="el" href="a00565_source.html#l00093">SDCARD_DATA_ERROR</a>, <a class="el" href="a00565_source.html#l00090">SDCARD_DATA_TIMEOUT</a>, <a class="el" href="a00565_source.html#l00081">SDCARD_SUCCESS</a>, and <a class="el" href="a01495_source.html#l01000">sdcard_write_cmd()</a>.</p>

<p>Referenced by <a class="el" href="a01495_source.html#l00524">sdcard_init()</a>.</p>

</div>
</div>
<a class="anchor" id="gaa28193bba64d05c69b3ee58d2501101a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t sdcard_set_CRC </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>enable</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Turns crc capabilities of the card on or off. </p>
<dl class="section note"><dt>Note</dt><dd>Does not work properly at this time. (FIXME) </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">enable</td><td>0 if CRC should be disabled, 1 if it should be enabled </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, !=0 otherwise </dd></dl>

<p>Definition at line <a class="el" href="a01495_source.html#l00343">343</a> of file <a class="el" href="a01495_source.html">sdcard.c</a>.</p>

<p>References <a class="el" href="a00565_source.html#l00075">MICRO_SD_CS</a>, <a class="el" href="a01491_source.html#l00145">mspi_chip_release()</a>, <a class="el" href="a01491_source.html#l00131">mspi_chip_select()</a>, <a class="el" href="a01200_source.html#l00186">NULL</a>, <a class="el" href="a01495_source.html#l00110">SDCARD_CMD59</a>, <a class="el" href="a00565_source.html#l00088">SDCARD_CMD_ERROR</a>, <a class="el" href="a00565_source.html#l00081">SDCARD_SUCCESS</a>, and <a class="el" href="a01495_source.html#l01000">sdcard_write_cmd()</a>.</p>

</div>
</div>
<a class="anchor" id="gaab018ecec7da52ff9373d35a7091dd42"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t sdcard_write_block </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function will write one block (512, 1024, 2048 or 4096Byte) of the SD-Card. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>Block address </td></tr>
    <tr><td class="paramname">*buffer</td><td>Pointer to a block buffer (needs to be as long as <a class="el" href="a01863.html#ga60952639ea126a5b2e5b9868a07147df" title="Returns the size of one block in bytes.">sdcard_get_block_size()</a>).</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">SDCARD_SUCCESS</td><td>SD-Card block write was successful </td></tr>
    <tr><td class="paramname">SDCARD_CMD_ERROR</td><td>CMD24 failure </td></tr>
    <tr><td class="paramname">SDCARD_BUSY_TIMEOUT</td><td></td></tr>
    <tr><td class="paramname">SDCARD_DATA_ERROR</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="a01891.html#_todo000010">Todo:</a></b></dt><dd>: handle crc enabled? </dd></dl>

<p>Definition at line <a class="el" href="a01495_source.html#l00805">805</a> of file <a class="el" href="a01495_source.html">sdcard.c</a>.</p>

<p>References <a class="el" href="a00565_source.html#l00075">MICRO_SD_CS</a>, <a class="el" href="a01491_source.html#l00145">mspi_chip_release()</a>, <a class="el" href="a01491_source.html#l00131">mspi_chip_select()</a>, <a class="el" href="a01491_source.html#l00152">mspi_transceive()</a>, <a class="el" href="a01200_source.html#l00186">NULL</a>, <a class="el" href="a00565_source.html#l00095">SDCARD_BUSY_TIMEOUT</a>, <a class="el" href="a01495_source.html#l00093">SDCARD_CMD24</a>, <a class="el" href="a00565_source.html#l00088">SDCARD_CMD_ERROR</a>, <a class="el" href="a00565_source.html#l00093">SDCARD_DATA_ERROR</a>, <a class="el" href="a00565_source.html#l00081">SDCARD_SUCCESS</a>, and <a class="el" href="a01495_source.html#l01000">sdcard_write_cmd()</a>.</p>

</div>
</div>
<a class="anchor" id="ga241f63fa7a56cec25729ad317ec5ce95"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t sdcard_write_cmd </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>resp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function sends a command via SPI to the SD-Card. </p>
<p>An SPI command consists off 6 bytes</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd</td><td>Command number to send </td></tr>
    <tr><td class="paramname">*arg</td><td>pointer to 32bit argument (addresses etc.) </td></tr>
    <tr><td class="paramname">*resp</td><td>Pointer to the response array. Only needed for responses other than R1. May be NULL if response is R1. Otherwise resp must be long enough for the response (only R3 and R7 are supported yet) and the first byte of the response array must indicate the response that is expected. For Example the first byte should be 0x07 if response type R7 is expected.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>R1 response byte or 0xFF in case of read/write timeout </dd></dl>

<p>Definition at line <a class="el" href="a01495_source.html#l01000">1000</a> of file <a class="el" href="a01495_source.html">sdcard.c</a>.</p>

<p>References <a class="el" href="a01491_source.html#l00152">mspi_transceive()</a>, <a class="el" href="a01200_source.html#l00186">NULL</a>, <a class="el" href="a01495_source.html#l00071">SDCARD_CMD0</a>, <a class="el" href="a01495_source.html#l00113">SDCARD_CMD55</a>, <a class="el" href="a01495_source.html#l00075">SDCARD_CMD8</a>, <a class="el" href="a01495_source.html#l00475">sdcard_cmd_crc()</a>, and <a class="el" href="a01013_source.html#l00071">watchdog_periodic()</a>.</p>

<p>Referenced by <a class="el" href="a01495_source.html#l00683">sdcard_erase_blocks()</a>, <a class="el" href="a01495_source.html#l00524">sdcard_init()</a>, <a class="el" href="a01495_source.html#l00728">sdcard_read_block()</a>, <a class="el" href="a01495_source.html#l00362">sdcard_read_csd()</a>, <a class="el" href="a01495_source.html#l00343">sdcard_set_CRC()</a>, <a class="el" href="a01495_source.html#l00805">sdcard_write_block()</a>, and <a class="el" href="a01495_source.html#l00874">sdcard_write_multi_block_start()</a>.</p>

</div>
</div>
<a class="anchor" id="ga30f82b5509c4c990a75d65fa9bcb4020"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t sdcard_write_multi_block_next </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes single of multiple sequental blocks. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">SDCARD_SUCCESS</td><td>Successfully wrote block </td></tr>
    <tr><td class="paramname">SDCARD_BUSY_TIMEOUT</td><td></td></tr>
    <tr><td class="paramname">SDCARD_DATA_ERROR</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="a01891.html#_todo000011">Todo:</a></b></dt><dd>: handle crc enabled? </dd></dl>

<p>Definition at line <a class="el" href="a01495_source.html#l00910">910</a> of file <a class="el" href="a01495_source.html">sdcard.c</a>.</p>

<p>References <a class="el" href="a00565_source.html#l00075">MICRO_SD_CS</a>, <a class="el" href="a01491_source.html#l00145">mspi_chip_release()</a>, <a class="el" href="a01491_source.html#l00131">mspi_chip_select()</a>, <a class="el" href="a01491_source.html#l00152">mspi_transceive()</a>, <a class="el" href="a00565_source.html#l00095">SDCARD_BUSY_TIMEOUT</a>, <a class="el" href="a00565_source.html#l00093">SDCARD_DATA_ERROR</a>, and <a class="el" href="a00565_source.html#l00081">SDCARD_SUCCESS</a>.</p>

</div>
</div>
<a class="anchor" id="ga8e0f2a21d319efdcbe772b5f8abc8f04"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t sdcard_write_multi_block_start </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>num_blocks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prepares to write multiple blocks sequentially. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>Address of first block </td></tr>
    <tr><td class="paramname">num_blocks</td><td>Number of blocks that should be written (0 means not known yet). Givin a number here could speed up writing due to possible sector pre-erase </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">SDCARD_SUCCESS</td><td>Starting mutli lock write was successful </td></tr>
    <tr><td class="paramname">SDCARD_CMD_ERROR</td><td>CMD25 failure </td></tr>
    <tr><td class="paramname">SDCARD_BUSY_TIMEOUT</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a01495_source.html#l00874">874</a> of file <a class="el" href="a01495_source.html">sdcard.c</a>.</p>

<p>References <a class="el" href="a00565_source.html#l00075">MICRO_SD_CS</a>, <a class="el" href="a01491_source.html#l00145">mspi_chip_release()</a>, <a class="el" href="a01491_source.html#l00131">mspi_chip_select()</a>, <a class="el" href="a01200_source.html#l00186">NULL</a>, <a class="el" href="a01495_source.html#l00117">SDCARD_ACMD23</a>, <a class="el" href="a00565_source.html#l00095">SDCARD_BUSY_TIMEOUT</a>, <a class="el" href="a01495_source.html#l00095">SDCARD_CMD25</a>, <a class="el" href="a00565_source.html#l00088">SDCARD_CMD_ERROR</a>, <a class="el" href="a00565_source.html#l00081">SDCARD_SUCCESS</a>, and <a class="el" href="a01495_source.html#l01000">sdcard_write_cmd()</a>.</p>

</div>
</div>
<a class="anchor" id="ga9e99df8d7809d6ee7cd9d330375a2efa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t sdcard_write_multi_block_stop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stops multiple block write. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">SDCARD_SUCCESS</td><td>successfull </td></tr>
    <tr><td class="paramname">SDCARD_BUSY_TIMEOUT</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a01495_source.html#l00960">960</a> of file <a class="el" href="a01495_source.html">sdcard.c</a>.</p>

<p>References <a class="el" href="a00565_source.html#l00075">MICRO_SD_CS</a>, <a class="el" href="a01491_source.html#l00145">mspi_chip_release()</a>, <a class="el" href="a01491_source.html#l00131">mspi_chip_select()</a>, <a class="el" href="a01491_source.html#l00152">mspi_transceive()</a>, <a class="el" href="a00565_source.html#l00095">SDCARD_BUSY_TIMEOUT</a>, and <a class="el" href="a00565_source.html#l00081">SDCARD_SUCCESS</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Apr 24 2014 16:26:19 for Contiki-Inga 3.x by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
