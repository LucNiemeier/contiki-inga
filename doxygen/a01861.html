<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Contiki-Inga 3.x: Master SPI Bus Driver (MSPI)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Contiki-Inga 3.x
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Master SPI Bus Driver (MSPI)<div class="ingroups"><a class="el" href="a01844.html">Bus Drivers</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga2be8f0ede12e3633d7e65fa763eee0e8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01861.html#ga2be8f0ede12e3633d7e65fa763eee0e8">MSPI_BUS_MANAGER</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:ga2be8f0ede12e3633d7e65fa763eee0e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaef8803e5cea30852725745a0f8a833be"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01861.html#gaef8803e5cea30852725745a0f8a833be">MSPI_MODE_0</a>&#160;&#160;&#160;(0x00)</td></tr>
<tr class="separator:gaef8803e5cea30852725745a0f8a833be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaebc9e1a3d9d028eb0b7605a061db49d2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01861.html#gaebc9e1a3d9d028eb0b7605a061db49d2">MSPI_MODE_1</a>&#160;&#160;&#160;(0x02)</td></tr>
<tr class="separator:gaebc9e1a3d9d028eb0b7605a061db49d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadffc32ec631e249b8dd5d88f736d3910"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01861.html#gadffc32ec631e249b8dd5d88f736d3910">MSPI_MODE_2</a>&#160;&#160;&#160;(0x01)</td></tr>
<tr class="separator:gadffc32ec631e249b8dd5d88f736d3910"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga62f27ec8f2ba6b7665d5e1ce4d35af06"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01861.html#ga62f27ec8f2ba6b7665d5e1ce4d35af06">MSPI_MODE_3</a>&#160;&#160;&#160;(0x03)</td></tr>
<tr class="separator:ga62f27ec8f2ba6b7665d5e1ce4d35af06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4f61a8cb4cd8301a0e888d6607ddd398"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01861.html#ga4f61a8cb4cd8301a0e888d6607ddd398">MSPI_BAUD_MAX</a>&#160;&#160;&#160;(0x00)</td></tr>
<tr class="separator:ga4f61a8cb4cd8301a0e888d6607ddd398"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa617bfe58f6839bc1c1118ad3e020f83"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01861.html#gaa617bfe58f6839bc1c1118ad3e020f83">MSPI_BAUD_2MBPS</a>&#160;&#160;&#160;(0x01)</td></tr>
<tr class="separator:gaa617bfe58f6839bc1c1118ad3e020f83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga31dbbbe7b71dc7cdc6045eef7cd0a729"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01861.html#ga31dbbbe7b71dc7cdc6045eef7cd0a729">MSPI_BAUD_1MBPS</a>&#160;&#160;&#160;(0x03)</td></tr>
<tr class="separator:ga31dbbbe7b71dc7cdc6045eef7cd0a729"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gab3ee2795441c3d6a2f5dc1c218ccbbe9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01861.html#gab3ee2795441c3d6a2f5dc1c218ccbbe9">mspi_init</a> (uint8_t cs, uint8_t mode, uint16_t baud)</td></tr>
<tr class="memdesc:gab3ee2795441c3d6a2f5dc1c218ccbbe9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the selected USART in the MSPI mode.  <a href="#gab3ee2795441c3d6a2f5dc1c218ccbbe9">More...</a><br/></td></tr>
<tr class="separator:gab3ee2795441c3d6a2f5dc1c218ccbbe9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3f05d401d16fcce3c0661fe8aa2f153c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01861.html#ga3f05d401d16fcce3c0661fe8aa2f153c">mspi_chip_select</a> (uint8_t cs)</td></tr>
<tr class="memdesc:ga3f05d401d16fcce3c0661fe8aa2f153c"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function enables the chip select by setting the needed I/O pins (BCD-Code)  <a href="#ga3f05d401d16fcce3c0661fe8aa2f153c">More...</a><br/></td></tr>
<tr class="separator:ga3f05d401d16fcce3c0661fe8aa2f153c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae3a3604ba056cdfe4c2c2bfccfbf2d96"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01861.html#gae3a3604ba056cdfe4c2c2bfccfbf2d96">mspi_chip_release</a> (uint8_t cs)</td></tr>
<tr class="memdesc:gae3a3604ba056cdfe4c2c2bfccfbf2d96"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function disables the chip select.  <a href="#gae3a3604ba056cdfe4c2c2bfccfbf2d96">More...</a><br/></td></tr>
<tr class="separator:gae3a3604ba056cdfe4c2c2bfccfbf2d96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7ae3d6ea422538a731f59094f01bcbb2"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01861.html#ga7ae3d6ea422538a731f59094f01bcbb2">mspi_transceive</a> (uint8_t data)</td></tr>
<tr class="memdesc:ga7ae3d6ea422538a731f59094f01bcbb2"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function can be use either to transmit or receive data via spi.  <a href="#ga7ae3d6ea422538a731f59094f01bcbb2">More...</a><br/></td></tr>
<tr class="separator:ga7ae3d6ea422538a731f59094f01bcbb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7b7eedb51639507efca464f82815d7d0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga7b7eedb51639507efca464f82815d7d0"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01861.html#ga7b7eedb51639507efca464f82815d7d0">mspi_deinit</a> (void)</td></tr>
<tr class="memdesc:ga7b7eedb51639507efca464f82815d7d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function will set all MSPI registers to their default values. <br/></td></tr>
<tr class="separator:ga7b7eedb51639507efca464f82815d7d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1c56d3bf4459b71b23b1a19cfcc00756"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01861.html#ga1c56d3bf4459b71b23b1a19cfcc00756">mspi_mgr_add</a> (uint8_t cs, uint8_t mode, uint16_t baud)</td></tr>
<tr class="memdesc:ga1c56d3bf4459b71b23b1a19cfcc00756"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function add a device to the SPI device table and calculates the specific checksum.  <a href="#ga1c56d3bf4459b71b23b1a19cfcc00756">More...</a><br/></td></tr>
<tr class="separator:ga1c56d3bf4459b71b23b1a19cfcc00756"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4c76b1450fd34e103155a69e1cf75b87"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01861.html#ga4c76b1450fd34e103155a69e1cf75b87">mspi_mgr_change_mode</a> (spi_dev new_config)</td></tr>
<tr class="memdesc:ga4c76b1450fd34e103155a69e1cf75b87"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function changes the SPI configuration.  <a href="#ga4c76b1450fd34e103155a69e1cf75b87">More...</a><br/></td></tr>
<tr class="separator:ga4c76b1450fd34e103155a69e1cf75b87"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>There are a lot of possibilities to realize a Serial Peripheral Interface (SPI) with the ATmega1284p, but the hardware SPI is used by the transceiver chip AT86rf230. In combination with contiki it is not possible to build up an SPI Bus with this hardware SPI. A software SPI would be a solution, but the ATmega1284p provides another opportunity. The MSPI (Maser SPI) is an alternative function of the USART. There are two independent hardware USART, so it is possible to use one for the default debug RS232 interface, while the other one is free to be used as an MSPI. The only difference between an normal SPI and the MSPI is, that MSPI only supports slaves on the bus.</p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga31dbbbe7b71dc7cdc6045eef7cd0a729"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSPI_BAUD_1MBPS&#160;&#160;&#160;(0x03)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>1Mbps MSPI Baud Rate </p>
<dl class="section note"><dt>Note</dt><dd>Assumption: f_osc = 8 MHz </dd></dl>

<p>Definition at line <a class="el" href="a01492_source.html#l00144">144</a> of file <a class="el" href="a01492_source.html">mspi.h</a>.</p>

</div>
</div>
<a class="anchor" id="gaa617bfe58f6839bc1c1118ad3e020f83"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSPI_BAUD_2MBPS&#160;&#160;&#160;(0x01)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>2Mbps MSPI Baud Rate </p>
<dl class="section note"><dt>Note</dt><dd>Assumption: f_osc = 8 MHz </dd></dl>

<p>Definition at line <a class="el" href="a01492_source.html#l00139">139</a> of file <a class="el" href="a01492_source.html">mspi.h</a>.</p>

<p>Referenced by <a class="el" href="a01495_source.html#l00524">sdcard_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ga4f61a8cb4cd8301a0e888d6607ddd398"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSPI_BAUD_MAX&#160;&#160;&#160;(0x00)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Maximum MSPI Baud Rate [bps] </p>
<dl class="section note"><dt>Note</dt><dd>The maximum baud rate is f_osc/2 </dd></dl>

<p>Definition at line <a class="el" href="a01492_source.html#l00134">134</a> of file <a class="el" href="a01492_source.html">mspi.h</a>.</p>

<p>Referenced by <a class="el" href="a01617_source.html#l00057">adxl345_available()</a>, <a class="el" href="a01480_source.html#l00068">at45db_init()</a>, and <a class="el" href="a01488_source.html#l00045">mpl115a_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ga2be8f0ede12e3633d7e65fa763eee0e8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSPI_BUS_MANAGER&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Enable or disable the MSPI-Bus Manager.</p>
<dl class="section note"><dt>Note</dt><dd>The... </dd></dl>

<p>Definition at line <a class="el" href="a01492_source.html#l00066">66</a> of file <a class="el" href="a01492_source.html">mspi.h</a>.</p>

</div>
</div>
<a class="anchor" id="gaef8803e5cea30852725745a0f8a833be"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSPI_MODE_0&#160;&#160;&#160;(0x00)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>MSPI Mode 0 </p>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>
Leading Edge: Sample (Rising Edge) </li>
<li>
Trailing Edge: Setup (Falling Edge) </li>
</ul>
</dd></dl>

<p>Definition at line <a class="el" href="a01492_source.html#l00100">100</a> of file <a class="el" href="a01492_source.html">mspi.h</a>.</p>

<p>Referenced by <a class="el" href="a01488_source.html#l00045">mpl115a_init()</a>, and <a class="el" href="a01495_source.html#l00524">sdcard_init()</a>.</p>

</div>
</div>
<a class="anchor" id="gaebc9e1a3d9d028eb0b7605a061db49d2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSPI_MODE_1&#160;&#160;&#160;(0x02)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>MSPI Mode 1 </p>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>
Leading Edge: Setup (Rising Edge) </li>
<li>
Trailing Edge: Sample (Falling Edge) </li>
</ul>
</dd></dl>

<p>Definition at line <a class="el" href="a01492_source.html#l00108">108</a> of file <a class="el" href="a01492_source.html">mspi.h</a>.</p>

</div>
</div>
<a class="anchor" id="gadffc32ec631e249b8dd5d88f736d3910"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSPI_MODE_2&#160;&#160;&#160;(0x01)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>MSPI Mode 2 </p>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>
Leading Edge: Sample (Falling Edge) </li>
<li>
Trailing Edge: Setup (Rising Edge) </li>
</ul>
</dd></dl>

<p>Definition at line <a class="el" href="a01492_source.html#l00116">116</a> of file <a class="el" href="a01492_source.html">mspi.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga62f27ec8f2ba6b7665d5e1ce4d35af06"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSPI_MODE_3&#160;&#160;&#160;(0x03)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>MSPI Mode 3 </p>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>
Leading Edge: Setup (Falling Edge) </li>
<li>
Trailing Edge: Sample (Rising Edge) </li>
</ul>
</dd></dl>

<p>Definition at line <a class="el" href="a01492_source.html#l00124">124</a> of file <a class="el" href="a01492_source.html">mspi.h</a>.</p>

<p>Referenced by <a class="el" href="a01617_source.html#l00057">adxl345_available()</a>, and <a class="el" href="a01480_source.html#l00068">at45db_init()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gae3a3604ba056cdfe4c2c2bfccfbf2d96"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mspi_chip_release </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>cs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function disables the chip select. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cs</td><td>Chip Select: Device ID </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a01491_source.html#l00145">145</a> of file <a class="el" href="a01491_source.html">mspi.c</a>.</p>

<p>Referenced by <a class="el" href="a01617_source.html#l00057">adxl345_available()</a>, <a class="el" href="a01617_source.html#l00180">adxl345_get()</a>, <a class="el" href="a01617_source.html#l00224">adxl345_read()</a>, <a class="el" href="a01617_source.html#l00214">adxl345_write()</a>, <a class="el" href="a01480_source.html#l00159">at45db_buffer_to_page()</a>, <a class="el" href="a01480_source.html#l00275">at45db_busy_wait()</a>, <a class="el" href="a01480_source.html#l00114">at45db_erase_block()</a>, <a class="el" href="a01480_source.html#l00101">at45db_erase_chip()</a>, <a class="el" href="a01480_source.html#l00128">at45db_erase_page()</a>, <a class="el" href="a01480_source.html#l00068">at45db_init()</a>, <a class="el" href="a01480_source.html#l00231">at45db_page_to_buf()</a>, <a class="el" href="a01480_source.html#l00249">at45db_read_buffer()</a>, <a class="el" href="a01480_source.html#l00206">at45db_read_page_bypassed()</a>, <a class="el" href="a01480_source.html#l00142">at45db_write_buffer()</a>, <a class="el" href="a01480_source.html#l00174">at45db_write_page()</a>, <a class="el" href="a01488_source.html#l00187">mpl115a_cmd()</a>, <a class="el" href="a01488_source.html#l00045">mpl115a_init()</a>, <a class="el" href="a01495_source.html#l00683">sdcard_erase_blocks()</a>, <a class="el" href="a01495_source.html#l00524">sdcard_init()</a>, <a class="el" href="a01495_source.html#l00728">sdcard_read_block()</a>, <a class="el" href="a01495_source.html#l00362">sdcard_read_csd()</a>, <a class="el" href="a01495_source.html#l00343">sdcard_set_CRC()</a>, <a class="el" href="a01495_source.html#l00805">sdcard_write_block()</a>, <a class="el" href="a01495_source.html#l00910">sdcard_write_multi_block_next()</a>, <a class="el" href="a01495_source.html#l00874">sdcard_write_multi_block_start()</a>, and <a class="el" href="a01495_source.html#l00960">sdcard_write_multi_block_stop()</a>.</p>

</div>
</div>
<a class="anchor" id="ga3f05d401d16fcce3c0661fe8aa2f153c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mspi_chip_select </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>cs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function enables the chip select by setting the needed I/O pins (BCD-Code) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cs</td><td>Chip Select: Device ID </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a01491_source.html#l00131">131</a> of file <a class="el" href="a01491_source.html">mspi.c</a>.</p>

<p>References <a class="el" href="a01491_source.html#l00195">mspi_mgr_change_mode()</a>.</p>

<p>Referenced by <a class="el" href="a01617_source.html#l00180">adxl345_get()</a>, <a class="el" href="a01617_source.html#l00224">adxl345_read()</a>, <a class="el" href="a01617_source.html#l00214">adxl345_write()</a>, <a class="el" href="a01480_source.html#l00275">at45db_busy_wait()</a>, <a class="el" href="a01480_source.html#l00114">at45db_erase_block()</a>, <a class="el" href="a01480_source.html#l00101">at45db_erase_chip()</a>, <a class="el" href="a01480_source.html#l00128">at45db_erase_page()</a>, <a class="el" href="a01480_source.html#l00068">at45db_init()</a>, <a class="el" href="a01480_source.html#l00265">at45db_write_cmd()</a>, <a class="el" href="a01488_source.html#l00187">mpl115a_cmd()</a>, <a class="el" href="a01495_source.html#l00683">sdcard_erase_blocks()</a>, <a class="el" href="a01495_source.html#l00524">sdcard_init()</a>, <a class="el" href="a01495_source.html#l00728">sdcard_read_block()</a>, <a class="el" href="a01495_source.html#l00362">sdcard_read_csd()</a>, <a class="el" href="a01495_source.html#l00343">sdcard_set_CRC()</a>, <a class="el" href="a01495_source.html#l00805">sdcard_write_block()</a>, <a class="el" href="a01495_source.html#l00910">sdcard_write_multi_block_next()</a>, <a class="el" href="a01495_source.html#l00874">sdcard_write_multi_block_start()</a>, and <a class="el" href="a01495_source.html#l00960">sdcard_write_multi_block_stop()</a>.</p>

</div>
</div>
<a class="anchor" id="gab3ee2795441c3d6a2f5dc1c218ccbbe9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mspi_init </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>cs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>baud</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the selected USART in the MSPI mode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mode</td><td>Select the (M)SPI mode (MSPI_MODE_0 ... MSPI_MODE_3) </td></tr>
    <tr><td class="paramname">baud</td><td>The MSPI BAUD rate. Sometimes it is necessary to reduce the SCK. Use MSPI_BAUD_MAX in common case. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a01491_source.html#l00109">109</a> of file <a class="el" href="a01491_source.html">mspi.c</a>.</p>

<p>References <a class="el" href="a01491_source.html#l00187">mspi_mgr_add()</a>.</p>

<p>Referenced by <a class="el" href="a01617_source.html#l00057">adxl345_available()</a>, <a class="el" href="a01480_source.html#l00068">at45db_init()</a>, <a class="el" href="a01488_source.html#l00045">mpl115a_init()</a>, and <a class="el" href="a01495_source.html#l00524">sdcard_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ga1c56d3bf4459b71b23b1a19cfcc00756"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mspi_mgr_add </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>cs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>baud</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function add a device to the SPI device table and calculates the specific checksum. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cs</td><td>Chip Select: Device ID </td></tr>
    <tr><td class="paramname">mode</td><td>Select the (M)SPI mode (MSPI_MODE_0 ... MSPI_MODE_3) </td></tr>
    <tr><td class="paramname">baud</td><td>The MSPI BAUD rate. Sometimes it is necessary to reduce the SCK. Use MSPI_BAUD_MAX in common case. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a01491_source.html#l00187">187</a> of file <a class="el" href="a01491_source.html">mspi.c</a>.</p>

<p>Referenced by <a class="el" href="a01491_source.html#l00109">mspi_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ga4c76b1450fd34e103155a69e1cf75b87"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mspi_mgr_change_mode </td>
          <td>(</td>
          <td class="paramtype">spi_dev&#160;</td>
          <td class="paramname"><em>new_config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function changes the SPI configuration. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">spi_dev</td><td>The specified entry of the SPI Device Table </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a01491_source.html#l00195">195</a> of file <a class="el" href="a01491_source.html">mspi.c</a>.</p>

<p>Referenced by <a class="el" href="a01491_source.html#l00131">mspi_chip_select()</a>.</p>

</div>
</div>
<a class="anchor" id="ga7ae3d6ea422538a731f59094f01bcbb2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t mspi_transceive </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function can be use either to transmit or receive data via spi. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td><ul>
<li>
When use this function to transmit: Data byte, which has to be transmit. </li>
<li>
When use this function to receive: Data value don't care. (Dummy Byte, e.g. 0xFF) </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>When use this function to transmit: The return value doesn't care When use this function to receive: Received data from the spi slave </dd></dl>
<dl class="section note"><dt>Note</dt><dd>The various devices along the SPI Bus are separated by the Chip Select (cs). The assignment of the SPI-devices depends on the hardware wiring. The correct chip select an spi configuration will be done by the spi-bus.manager. Otherwise please ensure, which Chip Select and spi bus configuration belong to which SPI device. </dd></dl>

<p>Definition at line <a class="el" href="a01491_source.html#l00152">152</a> of file <a class="el" href="a01491_source.html">mspi.c</a>.</p>

<p>Referenced by <a class="el" href="a01617_source.html#l00180">adxl345_get()</a>, <a class="el" href="a01617_source.html#l00224">adxl345_read()</a>, <a class="el" href="a01617_source.html#l00214">adxl345_write()</a>, <a class="el" href="a01480_source.html#l00275">at45db_busy_wait()</a>, <a class="el" href="a01480_source.html#l00068">at45db_init()</a>, <a class="el" href="a01480_source.html#l00249">at45db_read_buffer()</a>, <a class="el" href="a01480_source.html#l00206">at45db_read_page_bypassed()</a>, <a class="el" href="a01480_source.html#l00142">at45db_write_buffer()</a>, <a class="el" href="a01480_source.html#l00265">at45db_write_cmd()</a>, <a class="el" href="a01480_source.html#l00174">at45db_write_page()</a>, <a class="el" href="a01488_source.html#l00187">mpl115a_cmd()</a>, <a class="el" href="a01495_source.html#l00524">sdcard_init()</a>, <a class="el" href="a01495_source.html#l00728">sdcard_read_block()</a>, <a class="el" href="a01495_source.html#l00362">sdcard_read_csd()</a>, <a class="el" href="a01495_source.html#l00805">sdcard_write_block()</a>, <a class="el" href="a01495_source.html#l01000">sdcard_write_cmd()</a>, <a class="el" href="a01495_source.html#l00910">sdcard_write_multi_block_next()</a>, and <a class="el" href="a01495_source.html#l00960">sdcard_write_multi_block_stop()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Apr 24 2014 16:26:19 for Contiki-Inga 3.x by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
