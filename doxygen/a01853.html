<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Contiki-Inga 3.x: Atmel Flash EEPROM AT45DB interface</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Contiki-Inga 3.x
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Atmel Flash EEPROM AT45DB interface<div class="ingroups"><a class="el" href="a01845.html">Device Drivers</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00034.html">bufmgr_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga72c9959cb5b1068c5f9f21dc23a09dda"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01853.html#ga72c9959cb5b1068c5f9f21dc23a09dda">AT45DB_CS</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:ga72c9959cb5b1068c5f9f21dc23a09dda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf7c7d71fe306befe5f1ea02dd078175f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01853.html#gaf7c7d71fe306befe5f1ea02dd078175f">AT45DB_STATUS_REG</a>&#160;&#160;&#160;0xD7</td></tr>
<tr class="separator:gaf7c7d71fe306befe5f1ea02dd078175f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1e7e20b79d276d1a5e6f35fbb8d902a3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01853.html#ga1e7e20b79d276d1a5e6f35fbb8d902a3">AT45DB_BLOCK_ERASE</a>&#160;&#160;&#160;0x50</td></tr>
<tr class="separator:ga1e7e20b79d276d1a5e6f35fbb8d902a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaafd29978831c81364c55672de8e268ec"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01853.html#gaafd29978831c81364c55672de8e268ec">AT45DB_PAGE_ERASE</a>&#160;&#160;&#160;0x81</td></tr>
<tr class="separator:gaafd29978831c81364c55672de8e268ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0008186e7a5de72d1f47471982bde2a5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01853.html#ga0008186e7a5de72d1f47471982bde2a5">AT45DB_PAGE_PROGRAM_1</a>&#160;&#160;&#160;0x82</td></tr>
<tr class="separator:ga0008186e7a5de72d1f47471982bde2a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0cc7814f2f563bb71b535e1573d93993"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01853.html#ga0cc7814f2f563bb71b535e1573d93993">AT45DB_PAGE_PROGRAM_2</a>&#160;&#160;&#160;0x85</td></tr>
<tr class="separator:ga0cc7814f2f563bb71b535e1573d93993"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaea747cae4eaab1a0829de11ece514201"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01853.html#gaea747cae4eaab1a0829de11ece514201">AT45DB_BUFFER_1</a>&#160;&#160;&#160;0x84</td></tr>
<tr class="separator:gaea747cae4eaab1a0829de11ece514201"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga93fb647be4b5723798dd2ea37ed14199"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01853.html#ga93fb647be4b5723798dd2ea37ed14199">AT45DB_BUFFER_2</a>&#160;&#160;&#160;0x87</td></tr>
<tr class="separator:ga93fb647be4b5723798dd2ea37ed14199"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac0c36fe2343be12a8c27bb87079ac203"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01853.html#gac0c36fe2343be12a8c27bb87079ac203">AT45DB_BUF_1_TO_PAGE</a>&#160;&#160;&#160;0x83</td></tr>
<tr class="separator:gac0c36fe2343be12a8c27bb87079ac203"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga91e5d90fa16afdb4792a59c9b14a981f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01853.html#ga91e5d90fa16afdb4792a59c9b14a981f">AT45DB_BUF_2_TO_PAGE</a>&#160;&#160;&#160;0x86</td></tr>
<tr class="separator:ga91e5d90fa16afdb4792a59c9b14a981f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaabf69eed8356d40cd6ff92d731b5678"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01853.html#gaaabf69eed8356d40cd6ff92d731b5678">AT45DB_PAGE_READ</a>&#160;&#160;&#160;0xD2</td></tr>
<tr class="separator:gaaabf69eed8356d40cd6ff92d731b5678"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacfd732b4a27c874f5b19ff6b739870bb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01853.html#gacfd732b4a27c874f5b19ff6b739870bb">AT45DB_PAGE_TO_BUF</a>&#160;&#160;&#160;0x55</td></tr>
<tr class="separator:gacfd732b4a27c874f5b19ff6b739870bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga89eb7a774129dfd5a0d2f3dd6fe2324a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01853.html#ga89eb7a774129dfd5a0d2f3dd6fe2324a">AT45DB_READ_BUFFER</a>&#160;&#160;&#160;0xD6</td></tr>
<tr class="separator:ga89eb7a774129dfd5a0d2f3dd6fe2324a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga2fdad711d5c750d4dff6a1a58b917c38"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01853.html#ga2fdad711d5c750d4dff6a1a58b917c38">at45db_init</a> (void)</td></tr>
<tr class="memdesc:ga2fdad711d5c750d4dff6a1a58b917c38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the AT45DBxx1 Flash EEPROM.  <a href="#ga2fdad711d5c750d4dff6a1a58b917c38">More...</a><br/></td></tr>
<tr class="separator:ga2fdad711d5c750d4dff6a1a58b917c38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafc9e2d2b1d54e3e053a12bd9a6fbce43"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01853.html#gafc9e2d2b1d54e3e053a12bd9a6fbce43">at45db_erase_chip</a> (void)</td></tr>
<tr class="memdesc:gafc9e2d2b1d54e3e053a12bd9a6fbce43"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function erases the whole chip.  <a href="#gafc9e2d2b1d54e3e053a12bd9a6fbce43">More...</a><br/></td></tr>
<tr class="separator:gafc9e2d2b1d54e3e053a12bd9a6fbce43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadd99d994dbed9d631bb80e397bfa0a40"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01853.html#gadd99d994dbed9d631bb80e397bfa0a40">at45db_erase_block</a> (uint16_t addr)</td></tr>
<tr class="memdesc:gadd99d994dbed9d631bb80e397bfa0a40"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function erases one block (4 Kbytes)  <a href="#gadd99d994dbed9d631bb80e397bfa0a40">More...</a><br/></td></tr>
<tr class="separator:gadd99d994dbed9d631bb80e397bfa0a40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5fcca70ad6d94815ab3f455410ba614a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01853.html#ga5fcca70ad6d94815ab3f455410ba614a">at45db_erase_page</a> (uint16_t addr)</td></tr>
<tr class="memdesc:ga5fcca70ad6d94815ab3f455410ba614a"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function erases one page e.g.  <a href="#ga5fcca70ad6d94815ab3f455410ba614a">More...</a><br/></td></tr>
<tr class="separator:ga5fcca70ad6d94815ab3f455410ba614a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4d0119cb838e5567c459804df3ad7ca1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01853.html#ga4d0119cb838e5567c459804df3ad7ca1">at45db_write_buffer</a> (uint16_t addr, uint8_t *buffer, uint16_t bytes)</td></tr>
<tr class="memdesc:ga4d0119cb838e5567c459804df3ad7ca1"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function writes bytes to the active buffer, while the buffer management is done automatically.  <a href="#ga4d0119cb838e5567c459804df3ad7ca1">More...</a><br/></td></tr>
<tr class="separator:ga4d0119cb838e5567c459804df3ad7ca1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9ef8bdd7a29c8b60199557e988523aef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01853.html#ga9ef8bdd7a29c8b60199557e988523aef">at45db_buffer_to_page</a> (uint16_t addr)</td></tr>
<tr class="memdesc:ga9ef8bdd7a29c8b60199557e988523aef"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function copies the active buffer into the Flash EEPROM page.  <a href="#ga9ef8bdd7a29c8b60199557e988523aef">More...</a><br/></td></tr>
<tr class="separator:ga9ef8bdd7a29c8b60199557e988523aef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacc544b2fcfd15dfca2c86b9d6f53b8a0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01853.html#gacc544b2fcfd15dfca2c86b9d6f53b8a0">at45db_write_page</a> (uint16_t p_addr, uint16_t b_addr, uint8_t *buffer, uint16_t bytes)</td></tr>
<tr class="memdesc:gacc544b2fcfd15dfca2c86b9d6f53b8a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function copies the data from the the pointer into the buffer, erases the EEPROM page and flashes the new content directly into the page.  <a href="#gacc544b2fcfd15dfca2c86b9d6f53b8a0">More...</a><br/></td></tr>
<tr class="separator:gacc544b2fcfd15dfca2c86b9d6f53b8a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga422dacee36ff968c42ac8be8b3156961"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01853.html#ga422dacee36ff968c42ac8be8b3156961">at45db_read_page_buffered</a> (uint16_t p_addr, uint16_t b_addr, uint8_t *buffer, uint16_t bytes)</td></tr>
<tr class="memdesc:ga422dacee36ff968c42ac8be8b3156961"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bytes can be read via buffer from a Flash EEPROM page.  <a href="#ga422dacee36ff968c42ac8be8b3156961">More...</a><br/></td></tr>
<tr class="separator:ga422dacee36ff968c42ac8be8b3156961"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabe68d146068c94806b66bb10992ecd8c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01853.html#gabe68d146068c94806b66bb10992ecd8c">at45db_read_page_bypassed</a> (uint16_t p_addr, uint16_t b_addr, uint8_t *buffer, uint16_t bytes)</td></tr>
<tr class="memdesc:gabe68d146068c94806b66bb10992ecd8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bytes can be read direct (bypassed) from a Flash EEPROM page.  <a href="#gabe68d146068c94806b66bb10992ecd8c">More...</a><br/></td></tr>
<tr class="separator:gabe68d146068c94806b66bb10992ecd8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2b4383cd3a184e6d047ddd991fceb3cc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01853.html#ga2b4383cd3a184e6d047ddd991fceb3cc">at45db_page_to_buf</a> (uint16_t addr)</td></tr>
<tr class="memdesc:ga2b4383cd3a184e6d047ddd991fceb3cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copies the given page into the buffer 2.  <a href="#ga2b4383cd3a184e6d047ddd991fceb3cc">More...</a><br/></td></tr>
<tr class="separator:ga2b4383cd3a184e6d047ddd991fceb3cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga137a0c66046e3d2ae99764154f3f9349"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01853.html#ga137a0c66046e3d2ae99764154f3f9349">at45db_read_buffer</a> (uint16_t b_addr, uint8_t *buffer, uint16_t bytes)</td></tr>
<tr class="memdesc:ga137a0c66046e3d2ae99764154f3f9349"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function readouts the buffer 2 data.  <a href="#ga137a0c66046e3d2ae99764154f3f9349">More...</a><br/></td></tr>
<tr class="separator:ga137a0c66046e3d2ae99764154f3f9349"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga101ae431ac3ae44d6c73dc41b23eda9d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01853.html#ga101ae431ac3ae44d6c73dc41b23eda9d">at45db_write_cmd</a> (uint8_t *cmd)</td></tr>
<tr class="memdesc:ga101ae431ac3ae44d6c73dc41b23eda9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The command word of the AT45DBxx1 normally consists of 4 bytes.  <a href="#ga101ae431ac3ae44d6c73dc41b23eda9d">More...</a><br/></td></tr>
<tr class="separator:ga101ae431ac3ae44d6c73dc41b23eda9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2612055d129ea8733de7241f5ee84cd6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga2612055d129ea8733de7241f5ee84cd6"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01853.html#ga2612055d129ea8733de7241f5ee84cd6">at45db_busy_wait</a> (void)</td></tr>
<tr class="memdesc:ga2612055d129ea8733de7241f5ee84cd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function waits until the busy flag of the status register is set, to detect when the AT45DBxx1 device is ready to receive new commands. <br/></td></tr>
<tr class="separator:ga2612055d129ea8733de7241f5ee84cd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>A fixed Flash EEPROM is always good to store some data. Furthermore in this project environment, the AT45DBxx1 will be used as a hardware interface between the boot section and the application section.</p>
<dl class="section note"><dt>Note</dt><dd>All functions will return immediately if flash is uninitialized or initialization failed.</dd>
<dd>
The function of the AT45DBxx1 is a little bit different compared to an SD-Card. The basic idea of the SD-Card is, to store one block (512Byte) into a local buffer an transfer the whole block via SPI to the SD-Card. The AT45DBxx1 has two page buffer, where the data can be collected by sending a byte via SPI to one of these buffers. If a buffer is filled, only a command is necessary and the AT45DBxx1 will copy the buffer into the flash section. To avoid latency, it is possible (and implemented) to switch between the page buffers. </dd></dl>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga1e7e20b79d276d1a5e6f35fbb8d902a3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AT45DB_BLOCK_ERASE&#160;&#160;&#160;0x50</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Block Erase Opcode </p>

<p>Definition at line <a class="el" href="a01481_source.html#l00092">92</a> of file <a class="el" href="a01481_source.html">at45db.h</a>.</p>

<p>Referenced by <a class="el" href="a01480_source.html#l00114">at45db_erase_block()</a>.</p>

</div>
</div>
<a class="anchor" id="gac0c36fe2343be12a8c27bb87079ac203"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AT45DB_BUF_1_TO_PAGE&#160;&#160;&#160;0x83</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Copy Buffer 1 to page Opcode </p>

<p>Definition at line <a class="el" href="a01481_source.html#l00118">118</a> of file <a class="el" href="a01481_source.html">at45db.h</a>.</p>

<p>Referenced by <a class="el" href="a01480_source.html#l00068">at45db_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ga91e5d90fa16afdb4792a59c9b14a981f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AT45DB_BUF_2_TO_PAGE&#160;&#160;&#160;0x86</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Copy Buffer 2 to page Opcode </p>

<p>Definition at line <a class="el" href="a01481_source.html#l00122">122</a> of file <a class="el" href="a01481_source.html">at45db.h</a>.</p>

<p>Referenced by <a class="el" href="a01480_source.html#l00068">at45db_init()</a>.</p>

</div>
</div>
<a class="anchor" id="gaea747cae4eaab1a0829de11ece514201"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AT45DB_BUFFER_1&#160;&#160;&#160;0x84</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write byte(s) to buffer 1 opcode </p>

<p>Definition at line <a class="el" href="a01481_source.html#l00109">109</a> of file <a class="el" href="a01481_source.html">at45db.h</a>.</p>

<p>Referenced by <a class="el" href="a01480_source.html#l00068">at45db_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ga93fb647be4b5723798dd2ea37ed14199"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AT45DB_BUFFER_2&#160;&#160;&#160;0x87</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write byte(s) to buffer 2 opcode </p>

<p>Definition at line <a class="el" href="a01481_source.html#l00113">113</a> of file <a class="el" href="a01481_source.html">at45db.h</a>.</p>

<p>Referenced by <a class="el" href="a01480_source.html#l00068">at45db_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ga72c9959cb5b1068c5f9f21dc23a09dda"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AT45DB_CS&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>SPI device order. The chip select number where the AT45DBxx1 Flash EEPROM is connected to the BCD-decimal decoder </p>

<p>Definition at line <a class="el" href="a01481_source.html#l00079">79</a> of file <a class="el" href="a01481_source.html">at45db.h</a>.</p>

<p>Referenced by <a class="el" href="a01480_source.html#l00159">at45db_buffer_to_page()</a>, <a class="el" href="a01480_source.html#l00275">at45db_busy_wait()</a>, <a class="el" href="a01480_source.html#l00114">at45db_erase_block()</a>, <a class="el" href="a01480_source.html#l00101">at45db_erase_chip()</a>, <a class="el" href="a01480_source.html#l00128">at45db_erase_page()</a>, <a class="el" href="a01480_source.html#l00068">at45db_init()</a>, <a class="el" href="a01480_source.html#l00231">at45db_page_to_buf()</a>, <a class="el" href="a01480_source.html#l00249">at45db_read_buffer()</a>, <a class="el" href="a01480_source.html#l00206">at45db_read_page_bypassed()</a>, <a class="el" href="a01480_source.html#l00142">at45db_write_buffer()</a>, <a class="el" href="a01480_source.html#l00265">at45db_write_cmd()</a>, and <a class="el" href="a01480_source.html#l00174">at45db_write_page()</a>.</p>

</div>
</div>
<a class="anchor" id="gaafd29978831c81364c55672de8e268ec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AT45DB_PAGE_ERASE&#160;&#160;&#160;0x81</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Page Erase Opcode </p>

<p>Definition at line <a class="el" href="a01481_source.html#l00096">96</a> of file <a class="el" href="a01481_source.html">at45db.h</a>.</p>

<p>Referenced by <a class="el" href="a01480_source.html#l00128">at45db_erase_page()</a>.</p>

</div>
</div>
<a class="anchor" id="ga0008186e7a5de72d1f47471982bde2a5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AT45DB_PAGE_PROGRAM_1&#160;&#160;&#160;0x82</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Main Memory Page Program Buffer 1 </p>

<p>Definition at line <a class="el" href="a01481_source.html#l00100">100</a> of file <a class="el" href="a01481_source.html">at45db.h</a>.</p>

<p>Referenced by <a class="el" href="a01480_source.html#l00068">at45db_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ga0cc7814f2f563bb71b535e1573d93993"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AT45DB_PAGE_PROGRAM_2&#160;&#160;&#160;0x85</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Main Memory Page Program Buffer 2 </p>

<p>Definition at line <a class="el" href="a01481_source.html#l00104">104</a> of file <a class="el" href="a01481_source.html">at45db.h</a>.</p>

<p>Referenced by <a class="el" href="a01480_source.html#l00068">at45db_init()</a>.</p>

</div>
</div>
<a class="anchor" id="gaaabf69eed8356d40cd6ff92d731b5678"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AT45DB_PAGE_READ&#160;&#160;&#160;0xD2</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read direct from Flash EEPROM page Opcode </p>

<p>Definition at line <a class="el" href="a01481_source.html#l00126">126</a> of file <a class="el" href="a01481_source.html">at45db.h</a>.</p>

<p>Referenced by <a class="el" href="a01480_source.html#l00206">at45db_read_page_bypassed()</a>.</p>

</div>
</div>
<a class="anchor" id="gacfd732b4a27c874f5b19ff6b739870bb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AT45DB_PAGE_TO_BUF&#160;&#160;&#160;0x55</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Transfer page to buffer 2 Opcode </p>
<dl class="section note"><dt>Note</dt><dd>Only Buffer 2 is used to readout a page, because the read respectively transfer latency is only about 200us </dd></dl>

<p>Definition at line <a class="el" href="a01481_source.html#l00133">133</a> of file <a class="el" href="a01481_source.html">at45db.h</a>.</p>

<p>Referenced by <a class="el" href="a01480_source.html#l00231">at45db_page_to_buf()</a>.</p>

</div>
</div>
<a class="anchor" id="ga89eb7a774129dfd5a0d2f3dd6fe2324a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AT45DB_READ_BUFFER&#160;&#160;&#160;0xD6</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read buffer 2 opcode </p>
<dl class="section note"><dt>Note</dt><dd>Only Buffer 2 is used to readout a page, because the read respectively transfer latency is only about 200us </dd></dl>

<p>Definition at line <a class="el" href="a01481_source.html#l00139">139</a> of file <a class="el" href="a01481_source.html">at45db.h</a>.</p>

<p>Referenced by <a class="el" href="a01480_source.html#l00249">at45db_read_buffer()</a>.</p>

</div>
</div>
<a class="anchor" id="gaf7c7d71fe306befe5f1ea02dd078175f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AT45DB_STATUS_REG&#160;&#160;&#160;0xD7</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Status Register Address. Bit 7 signalizes if the device is busy.</p>
<ul>
<li>1 : not busy</li>
<li>0 : busy </li>
</ul>

<p>Definition at line <a class="el" href="a01481_source.html#l00087">87</a> of file <a class="el" href="a01481_source.html">at45db.h</a>.</p>

<p>Referenced by <a class="el" href="a01480_source.html#l00275">at45db_busy_wait()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga9ef8bdd7a29c8b60199557e988523aef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void at45db_buffer_to_page </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function copies the active buffer into the Flash EEPROM page. </p>
<p>Moreover it switches the active buffer to avoid latency.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>page address e.g. AT45DB161 (0 ... 4095) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a01480_source.html#l00159">159</a> of file <a class="el" href="a01480_source.html">at45db.c</a>.</p>

<p>References <a class="el" href="a01481_source.html#l00154">bufmgr_t::active_buffer</a>, <a class="el" href="a01480_source.html#l00275">at45db_busy_wait()</a>, <a class="el" href="a01481_source.html#l00079">AT45DB_CS</a>, <a class="el" href="a01480_source.html#l00265">at45db_write_cmd()</a>, <a class="el" href="a01481_source.html#l00164">bufmgr_t::buf_to_page_addr</a>, and <a class="el" href="a01491_source.html#l00145">mspi_chip_release()</a>.</p>

</div>
</div>
<a class="anchor" id="gadd99d994dbed9d631bb80e397bfa0a40"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void at45db_erase_block </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function erases one block (4 Kbytes) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>block address e.g. AT45DB161 (0 ... 511)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The time to erase one block can take up to 45ms - 100ms! </dd></dl>

<p>Definition at line <a class="el" href="a01480_source.html#l00114">114</a> of file <a class="el" href="a01480_source.html">at45db.c</a>.</p>

<p>References <a class="el" href="a01481_source.html#l00092">AT45DB_BLOCK_ERASE</a>, <a class="el" href="a01480_source.html#l00275">at45db_busy_wait()</a>, <a class="el" href="a01481_source.html#l00079">AT45DB_CS</a>, <a class="el" href="a01480_source.html#l00265">at45db_write_cmd()</a>, <a class="el" href="a01491_source.html#l00145">mspi_chip_release()</a>, and <a class="el" href="a01491_source.html#l00131">mspi_chip_select()</a>.</p>

</div>
</div>
<a class="anchor" id="gafc9e2d2b1d54e3e053a12bd9a6fbce43"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void at45db_erase_chip </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function erases the whole chip. </p>
<dl class="section note"><dt>Note</dt><dd>The time to erase the whole chip can take up to 20sec! </dd></dl>

<p>Definition at line <a class="el" href="a01480_source.html#l00101">101</a> of file <a class="el" href="a01480_source.html">at45db.c</a>.</p>

<p>References <a class="el" href="a01480_source.html#l00275">at45db_busy_wait()</a>, <a class="el" href="a01481_source.html#l00079">AT45DB_CS</a>, <a class="el" href="a01480_source.html#l00265">at45db_write_cmd()</a>, <a class="el" href="a01491_source.html#l00145">mspi_chip_release()</a>, and <a class="el" href="a01491_source.html#l00131">mspi_chip_select()</a>.</p>

</div>
</div>
<a class="anchor" id="ga5fcca70ad6d94815ab3f455410ba614a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void at45db_erase_page </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function erases one page e.g. </p>
<p>AT45DB161 (512 bytes)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>page address e.g. AT45DB161 (0 ... 4095)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The time to erase one bock can take up to 15ms - 35ms! </dd></dl>

<p>Definition at line <a class="el" href="a01480_source.html#l00128">128</a> of file <a class="el" href="a01480_source.html">at45db.c</a>.</p>

<p>References <a class="el" href="a01480_source.html#l00275">at45db_busy_wait()</a>, <a class="el" href="a01481_source.html#l00079">AT45DB_CS</a>, <a class="el" href="a01481_source.html#l00096">AT45DB_PAGE_ERASE</a>, <a class="el" href="a01480_source.html#l00265">at45db_write_cmd()</a>, <a class="el" href="a01491_source.html#l00145">mspi_chip_release()</a>, and <a class="el" href="a01491_source.html#l00131">mspi_chip_select()</a>.</p>

</div>
</div>
<a class="anchor" id="ga2fdad711d5c750d4dff6a1a58b917c38"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t at45db_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the AT45DBxx1 Flash EEPROM. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>at45db available </td></tr>
    <tr><td class="paramname">-1</td><td>at45db not available</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>No special settings are necessary to initialize the Flash memory. The standard data flash page size is 528Byte e.g. AT45DB161 </dd></dl>

<p>Definition at line <a class="el" href="a01480_source.html#l00068">68</a> of file <a class="el" href="a01480_source.html">at45db.c</a>.</p>

<p>References <a class="el" href="a01481_source.html#l00154">bufmgr_t::active_buffer</a>, <a class="el" href="a01481_source.html#l00118">AT45DB_BUF_1_TO_PAGE</a>, <a class="el" href="a01481_source.html#l00122">AT45DB_BUF_2_TO_PAGE</a>, <a class="el" href="a01481_source.html#l00109">AT45DB_BUFFER_1</a>, <a class="el" href="a01481_source.html#l00113">AT45DB_BUFFER_2</a>, <a class="el" href="a01481_source.html#l00079">AT45DB_CS</a>, <a class="el" href="a01481_source.html#l00100">AT45DB_PAGE_PROGRAM_1</a>, <a class="el" href="a01481_source.html#l00104">AT45DB_PAGE_PROGRAM_2</a>, <a class="el" href="a01481_source.html#l00164">bufmgr_t::buf_to_page_addr</a>, <a class="el" href="a01481_source.html#l00159">bufmgr_t::buffer_addr</a>, <a class="el" href="a01492_source.html#l00134">MSPI_BAUD_MAX</a>, <a class="el" href="a01491_source.html#l00145">mspi_chip_release()</a>, <a class="el" href="a01491_source.html#l00131">mspi_chip_select()</a>, <a class="el" href="a01491_source.html#l00109">mspi_init()</a>, <a class="el" href="a01492_source.html#l00124">MSPI_MODE_3</a>, <a class="el" href="a01491_source.html#l00152">mspi_transceive()</a>, and <a class="el" href="a01481_source.html#l00169">bufmgr_t::page_program</a>.</p>

</div>
</div>
<a class="anchor" id="ga2b4383cd3a184e6d047ddd991fceb3cc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void at45db_page_to_buf </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copies the given page into the buffer 2. </p>
<dl class="section note"><dt>Note</dt><dd>Only Buffer 2 is used to readout a page, because the read respectively transfer latency is only about 200us</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>page address e.g. AT45DB161 (0 - 4095) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a01480_source.html#l00231">231</a> of file <a class="el" href="a01480_source.html">at45db.c</a>.</p>

<p>References <a class="el" href="a01480_source.html#l00275">at45db_busy_wait()</a>, <a class="el" href="a01481_source.html#l00079">AT45DB_CS</a>, <a class="el" href="a01481_source.html#l00133">AT45DB_PAGE_TO_BUF</a>, <a class="el" href="a01480_source.html#l00265">at45db_write_cmd()</a>, and <a class="el" href="a01491_source.html#l00145">mspi_chip_release()</a>.</p>

<p>Referenced by <a class="el" href="a01480_source.html#l00196">at45db_read_page_buffered()</a>.</p>

</div>
</div>
<a class="anchor" id="ga137a0c66046e3d2ae99764154f3f9349"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void at45db_read_buffer </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>b_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function readouts the buffer 2 data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">b_addr</td><td>byte address within the page e.g. AT45DB161 (0 - 527) </td></tr>
    <tr><td class="paramname">*buffer</td><td>Pointer to local byte buffer </td></tr>
    <tr><td class="paramname">bytes</td><td>Number of bytes (e.g. byte buffer size) which have to be read to the local byte buffer </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a01480_source.html#l00249">249</a> of file <a class="el" href="a01480_source.html">at45db.c</a>.</p>

<p>References <a class="el" href="a01480_source.html#l00275">at45db_busy_wait()</a>, <a class="el" href="a01481_source.html#l00079">AT45DB_CS</a>, <a class="el" href="a01481_source.html#l00139">AT45DB_READ_BUFFER</a>, <a class="el" href="a01480_source.html#l00265">at45db_write_cmd()</a>, <a class="el" href="a01491_source.html#l00145">mspi_chip_release()</a>, and <a class="el" href="a01491_source.html#l00152">mspi_transceive()</a>.</p>

<p>Referenced by <a class="el" href="a01480_source.html#l00196">at45db_read_page_buffered()</a>.</p>

</div>
</div>
<a class="anchor" id="ga422dacee36ff968c42ac8be8b3156961"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void at45db_read_page_buffered </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>p_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>b_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Bytes can be read via buffer from a Flash EEPROM page. </p>
<p>With this function you select the page, the start byte within the page and the number of bytes you want to read.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_addr</td><td>page address e.g. AT45DB161 (0 - 4095) </td></tr>
    <tr><td class="paramname">b_addr</td><td>byte address within the page e.g. AT45DB161 (0 - 527) </td></tr>
    <tr><td class="paramname">*buffer</td><td>Pointer to local byte buffer </td></tr>
    <tr><td class="paramname">bytes</td><td>Number of bytes (e.g. byte buffer size) which have to be read to the local byte buffer </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a01480_source.html#l00196">196</a> of file <a class="el" href="a01480_source.html">at45db.c</a>.</p>

<p>References <a class="el" href="a01480_source.html#l00275">at45db_busy_wait()</a>, <a class="el" href="a01480_source.html#l00231">at45db_page_to_buf()</a>, and <a class="el" href="a01480_source.html#l00249">at45db_read_buffer()</a>.</p>

</div>
</div>
<a class="anchor" id="gabe68d146068c94806b66bb10992ecd8c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void at45db_read_page_bypassed </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>p_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>b_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Bytes can be read direct (bypassed) from a Flash EEPROM page. </p>
<p>With this function you select the page, the start byte within the page and the number of bytes you want to read.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_addr</td><td>page address e.g. AT45DB161 (0 - 4095) </td></tr>
    <tr><td class="paramname">b_addr</td><td>byte address within the page e.g. AT45DB161 (0 - 527) </td></tr>
    <tr><td class="paramname">*buffer</td><td>Pointer to local byte buffer </td></tr>
    <tr><td class="paramname">bytes</td><td>Number of bytes (e.g. byte buffer size) which have to be read to the local byte buffer </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a01480_source.html#l00206">206</a> of file <a class="el" href="a01480_source.html">at45db.c</a>.</p>

<p>References <a class="el" href="a01480_source.html#l00275">at45db_busy_wait()</a>, <a class="el" href="a01481_source.html#l00079">AT45DB_CS</a>, <a class="el" href="a01481_source.html#l00126">AT45DB_PAGE_READ</a>, <a class="el" href="a01480_source.html#l00265">at45db_write_cmd()</a>, <a class="el" href="a01491_source.html#l00145">mspi_chip_release()</a>, and <a class="el" href="a01491_source.html#l00152">mspi_transceive()</a>.</p>

</div>
</div>
<a class="anchor" id="ga4d0119cb838e5567c459804df3ad7ca1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void at45db_write_buffer </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function writes bytes to the active buffer, while the buffer management is done automatically. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>Byte address within the buffer e.g. AT45DB161 (0 ... 527) </td></tr>
    <tr><td class="paramname">*buffer</td><td>Pointer to local byte buffer </td></tr>
    <tr><td class="paramname">bytes</td><td>Number of bytes (e.g. byte buffer size) which have to be written to the active buffer </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a01480_source.html#l00142">142</a> of file <a class="el" href="a01480_source.html">at45db.c</a>.</p>

<p>References <a class="el" href="a01481_source.html#l00154">bufmgr_t::active_buffer</a>, <a class="el" href="a01481_source.html#l00079">AT45DB_CS</a>, <a class="el" href="a01480_source.html#l00265">at45db_write_cmd()</a>, <a class="el" href="a01481_source.html#l00159">bufmgr_t::buffer_addr</a>, <a class="el" href="a01491_source.html#l00145">mspi_chip_release()</a>, and <a class="el" href="a01491_source.html#l00152">mspi_transceive()</a>.</p>

</div>
</div>
<a class="anchor" id="ga101ae431ac3ae44d6c73dc41b23eda9d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void at45db_write_cmd </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>cmd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The command word of the AT45DBxx1 normally consists of 4 bytes. </p>
<p>This function enables the chip select and sends the command (opcode + address information) to the AT45DBxx1.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*cmd</td><td>Pointer to the 4 byte command array </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a01480_source.html#l00265">265</a> of file <a class="el" href="a01480_source.html">at45db.c</a>.</p>

<p>References <a class="el" href="a01481_source.html#l00079">AT45DB_CS</a>, <a class="el" href="a01491_source.html#l00131">mspi_chip_select()</a>, and <a class="el" href="a01491_source.html#l00152">mspi_transceive()</a>.</p>

<p>Referenced by <a class="el" href="a01480_source.html#l00159">at45db_buffer_to_page()</a>, <a class="el" href="a01480_source.html#l00114">at45db_erase_block()</a>, <a class="el" href="a01480_source.html#l00101">at45db_erase_chip()</a>, <a class="el" href="a01480_source.html#l00128">at45db_erase_page()</a>, <a class="el" href="a01480_source.html#l00231">at45db_page_to_buf()</a>, <a class="el" href="a01480_source.html#l00249">at45db_read_buffer()</a>, <a class="el" href="a01480_source.html#l00206">at45db_read_page_bypassed()</a>, <a class="el" href="a01480_source.html#l00142">at45db_write_buffer()</a>, and <a class="el" href="a01480_source.html#l00174">at45db_write_page()</a>.</p>

</div>
</div>
<a class="anchor" id="gacc544b2fcfd15dfca2c86b9d6f53b8a0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void at45db_write_page </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>p_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>b_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function copies the data from the the pointer into the buffer, erases the EEPROM page and flashes the new content directly into the page. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_addr</td><td>page address e.g. AT45DB161 (0 - 4095) </td></tr>
    <tr><td class="paramname">b_addr</td><td>byte address within the page e.g. AT45DB161 (0 - 527) </td></tr>
    <tr><td class="paramname">*buffer</td><td>Pointer to local byte buffer </td></tr>
    <tr><td class="paramname">bytes</td><td>Number of bytes (e.g. byte buffer size) which have to be read to the local byte buffer </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a01480_source.html#l00174">174</a> of file <a class="el" href="a01480_source.html">at45db.c</a>.</p>

<p>References <a class="el" href="a01481_source.html#l00154">bufmgr_t::active_buffer</a>, <a class="el" href="a01481_source.html#l00079">AT45DB_CS</a>, <a class="el" href="a01480_source.html#l00265">at45db_write_cmd()</a>, <a class="el" href="a01491_source.html#l00145">mspi_chip_release()</a>, <a class="el" href="a01491_source.html#l00152">mspi_transceive()</a>, and <a class="el" href="a01481_source.html#l00169">bufmgr_t::page_program</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Apr 24 2014 16:26:19 for Contiki-Inga 3.x by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
