<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Contiki-Inga 3.x: DiskIO Abstraction Layer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Contiki-Inga 3.x
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">DiskIO Abstraction Layer<div class="ingroups"><a class="el" href="a01760.html">The Contiki file system interface</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:a00146"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00146.html">diskio.c</a></td></tr>
<tr class="memdesc:a00146"><td class="mdescLeft">&#160;</td><td class="mdescRight"><pre class="fragment"> DiskIO Abstraction Layer Implementation
</pre> <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00147"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00147.html">diskio.h</a></td></tr>
<tr class="memdesc:a00147"><td class="mdescLeft">&#160;</td><td class="mdescRight"><pre class="fragment">    DiskIO Layer definitions
</pre> <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00044.html">diskio_device_info</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores the necessary information to identify a device using the diskio-Library.  <a href="a00044.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga9160e40736f0db646f33ff1cd1ed1dd8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga9160e40736f0db646f33ff1cd1ed1dd8"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01762.html#ga9160e40736f0db646f33ff1cd1ed1dd8">DISKIO_DEVICE_TYPE_NOT_RECOGNIZED</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:ga9160e40736f0db646f33ff1cd1ed1dd8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allows raw access to disks, used by the MBR-Subsystem. <br/></td></tr>
<tr class="separator:ga9160e40736f0db646f33ff1cd1ed1dd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6dcabcbacf9cb38cf5993524727b08ad"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01762.html#ga6dcabcbacf9cb38cf5993524727b08ad">DISKIO_MAX_SECTOR_SIZE</a>&#160;&#160;&#160;512</td></tr>
<tr class="memdesc:ga6dcabcbacf9cb38cf5993524727b08ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bigger sectors then this are not supported.  <a href="#ga6dcabcbacf9cb38cf5993524727b08ad">More...</a><br/></td></tr>
<tr class="separator:ga6dcabcbacf9cb38cf5993524727b08ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3aaa9e9b5f1fe3c7dfde3689f4a23508"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga3aaa9e9b5f1fe3c7dfde3689f4a23508"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01762.html#ga3aaa9e9b5f1fe3c7dfde3689f4a23508">DISKIO_DEVICE_TYPE_MASK</a>&#160;&#160;&#160;0x7f</td></tr>
<tr class="memdesc:ga3aaa9e9b5f1fe3c7dfde3689f4a23508"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mask used to ignore modifiers like the PARTITION flag. <br/></td></tr>
<tr class="separator:ga3aaa9e9b5f1fe3c7dfde3689f4a23508"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gad69813325247e34ed6a7d3668af390f6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01762.html#gad69813325247e34ed6a7d3668af390f6">diskio_print_device_info</a> (struct <a class="el" href="a00044.html">diskio_device_info</a> *dev)</td></tr>
<tr class="memdesc:gad69813325247e34ed6a7d3668af390f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints information about the specified device.  <a href="#gad69813325247e34ed6a7d3668af390f6">More...</a><br/></td></tr>
<tr class="separator:gad69813325247e34ed6a7d3668af390f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4585cf5b3f1ef34e4067b2f14c01243a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01762.html#ga4585cf5b3f1ef34e4067b2f14c01243a">diskio_read_block</a> (struct <a class="el" href="a00044.html">diskio_device_info</a> *dev, uint32_t block_address, uint8_t *buffer)</td></tr>
<tr class="memdesc:ga4585cf5b3f1ef34e4067b2f14c01243a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads one block from the specified device and stores it in buffer.  <a href="#ga4585cf5b3f1ef34e4067b2f14c01243a">More...</a><br/></td></tr>
<tr class="separator:ga4585cf5b3f1ef34e4067b2f14c01243a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab588608cb8d7018aad7878ebf3101dda"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01762.html#gab588608cb8d7018aad7878ebf3101dda">diskio_read_blocks</a> (struct <a class="el" href="a00044.html">diskio_device_info</a> *dev, uint32_t block_start_address, uint32_t num_blocks, uint8_t *buffer)</td></tr>
<tr class="memdesc:gab588608cb8d7018aad7878ebf3101dda"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads multiple blocks from the specified device.  <a href="#gab588608cb8d7018aad7878ebf3101dda">More...</a><br/></td></tr>
<tr class="separator:gab588608cb8d7018aad7878ebf3101dda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac3d6337bdaa0c6f306e90578e7f32b84"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01762.html#gac3d6337bdaa0c6f306e90578e7f32b84">diskio_write_block</a> (struct <a class="el" href="a00044.html">diskio_device_info</a> *dev, uint32_t block_address, uint8_t *buffer)</td></tr>
<tr class="memdesc:gac3d6337bdaa0c6f306e90578e7f32b84"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes a single block to the specified device.  <a href="#gac3d6337bdaa0c6f306e90578e7f32b84">More...</a><br/></td></tr>
<tr class="separator:gac3d6337bdaa0c6f306e90578e7f32b84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5e7b794e2afe4b0bd067c19cd393a1c2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01762.html#ga5e7b794e2afe4b0bd067c19cd393a1c2">diskio_write_blocks_start</a> (struct <a class="el" href="a00044.html">diskio_device_info</a> *dev, uint32_t block_start_address, uint32_t num_blocks)</td></tr>
<tr class="memdesc:ga5e7b794e2afe4b0bd067c19cd393a1c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start writing multiple blocks to the specified device.  <a href="#ga5e7b794e2afe4b0bd067c19cd393a1c2">More...</a><br/></td></tr>
<tr class="separator:ga5e7b794e2afe4b0bd067c19cd393a1c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga36f4203ba8f4de3982f9fe08602315cf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01762.html#ga36f4203ba8f4de3982f9fe08602315cf">diskio_write_blocks_next</a> (struct <a class="el" href="a00044.html">diskio_device_info</a> *dev, uint8_t *buffer)</td></tr>
<tr class="memdesc:ga36f4203ba8f4de3982f9fe08602315cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write next of multiple blocks to the specified device.  <a href="#ga36f4203ba8f4de3982f9fe08602315cf">More...</a><br/></td></tr>
<tr class="separator:ga36f4203ba8f4de3982f9fe08602315cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaabdcf769998edfeeeb3cebe6fd13041d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01762.html#gaabdcf769998edfeeeb3cebe6fd13041d">diskio_write_blocks_done</a> (struct <a class="el" href="a00044.html">diskio_device_info</a> *dev)</td></tr>
<tr class="memdesc:gaabdcf769998edfeeeb3cebe6fd13041d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start writing multiple blocks to the specified device.  <a href="#gaabdcf769998edfeeeb3cebe6fd13041d">More...</a><br/></td></tr>
<tr class="separator:gaabdcf769998edfeeeb3cebe6fd13041d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac1d9fc25709d592d9ce57e65b5b5d9d4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01762.html#gac1d9fc25709d592d9ce57e65b5b5d9d4">diskio_set_default_device</a> (struct <a class="el" href="a00044.html">diskio_device_info</a> *dev)</td></tr>
<tr class="memdesc:gac1d9fc25709d592d9ce57e65b5b5d9d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the default operation device.  <a href="#gac1d9fc25709d592d9ce57e65b5b5d9d4">More...</a><br/></td></tr>
<tr class="separator:gac1d9fc25709d592d9ce57e65b5b5d9d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7e043ead6108b8967dc3d0abcfc9dec5"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="a00044.html">diskio_device_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01762.html#ga7e043ead6108b8967dc3d0abcfc9dec5">diskio_devices</a> ()</td></tr>
<tr class="memdesc:ga7e043ead6108b8967dc3d0abcfc9dec5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the device-Database.  <a href="#ga7e043ead6108b8967dc3d0abcfc9dec5">More...</a><br/></td></tr>
<tr class="separator:ga7e043ead6108b8967dc3d0abcfc9dec5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadfa1e7efece58f711484311b56676327"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a01762.html#gadfa1e7efece58f711484311b56676327">diskio_detect_devices</a> ()</td></tr>
<tr class="memdesc:gadfa1e7efece58f711484311b56676327"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates the internal database of available devices.  <a href="#gadfa1e7efece58f711484311b56676327">More...</a><br/></td></tr>
<tr class="separator:gadfa1e7efece58f711484311b56676327"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<dl class="section note"><dt>Note</dt><dd>This interface was inspired by the diskio-interface of the FatFS-Module.</dd></dl>
<p>It's normally not important for Filesystem-Drivers to know, what type the underlying storage device is. It's only important that the Driver can write and read on this device. This abstraction layer enabled the filesystem drivers to do exactly that.</p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga6dcabcbacf9cb38cf5993524727b08ad"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DISKIO_MAX_SECTOR_SIZE&#160;&#160;&#160;512</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Bigger sectors then this are not supported. </p>
<p>May be reduced down to 512 to use less memory. </p>

<p>Definition at line <a class="el" href="a00147_source.html#l00065">65</a> of file <a class="el" href="a00147_source.html">diskio.h</a>.</p>

<p>Referenced by <a class="el" href="a00146_source.html#l00329">diskio_detect_devices()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gadfa1e7efece58f711484311b56676327"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int diskio_detect_devices </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates the internal database of available devices. </p>
<p>Adds virtual devices for multiple Partitions on devices using the MBR-Library. Number of devices in the database is limited by the DISKIO_MAX_DEVICES define. Warning the device numbers may change when calling this function. It should be called once on start but may also be called, if the microSD-Card was ejected to update the device database. </p>
<dl class="todo"><dt><b><a class="el" href="a01891.html#_todo000003">Todo:</a></b></dt><dd>Place definitions at proper position </dd></dl>

<p>Definition at line <a class="el" href="a00146_source.html#l00329">329</a> of file <a class="el" href="a00146_source.html">diskio.c</a>.</p>

<p>References <a class="el" href="a00147_source.html#l00065">DISKIO_MAX_SECTOR_SIZE</a>, <a class="el" href="a00147_source.html#l00111">diskio_device_info::first_sector</a>, <a class="el" href="a00152_source.html#l00083">mbr_primary_partition::lba_first_sector</a>, <a class="el" href="a00152_source.html#l00085">mbr_primary_partition::lba_num_sectors</a>, <a class="el" href="a00151_source.html#l00154">mbr_hasPartition()</a>, <a class="el" href="a00151_source.html#l00051">mbr_init()</a>, <a class="el" href="a00151_source.html#l00062">mbr_read()</a>, <a class="el" href="a00147_source.html#l00106">diskio_device_info::num_sectors</a>, <a class="el" href="a00147_source.html#l00101">diskio_device_info::number</a>, <a class="el" href="a00152_source.html#l00095">mbr::partition</a>, <a class="el" href="a00147_source.html#l00104">diskio_device_info::partition</a>, <a class="el" href="a00147_source.html#l00108">diskio_device_info::sector_size</a>, and <a class="el" href="a00147_source.html#l00099">diskio_device_info::type</a>.</p>

</div>
</div>
<a class="anchor" id="ga7e043ead6108b8967dc3d0abcfc9dec5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="a00044.html">diskio_device_info</a> * diskio_devices </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">read</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the device-Database. </p>
<p>Number of devices in the database is limited by the DISKIO_MAX_DEVICES define. </p>
<dl class="section return"><dt>Returns</dt><dd>pointer to the Array of device infos. No available device entries have the type set to DISKIO_DEVICE_TYPE_NOT_RECOGNIZED. </dd></dl>

<p>Definition at line <a class="el" href="a00146_source.html#l00323">323</a> of file <a class="el" href="a00146_source.html">diskio.c</a>.</p>

</div>
</div>
<a class="anchor" id="gad69813325247e34ed6a7d3668af390f6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void diskio_print_device_info </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="a00044.html">diskio_device_info</a> *&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prints information about the specified device. </p>
<p><b>Output Format:</b> <br/>
 DiskIO Device Info<br/>
 type = text <br/>
 number = X<br/>
 partition = X<br/>
 num_sectors = X<br/>
 sector_size = X<br/>
 first_sector = X</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*dev</td><td>the pointer to the device info struct </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00146_source.html#l00073">73</a> of file <a class="el" href="a00146_source.html">diskio.c</a>.</p>

<p>References <a class="el" href="a00147_source.html#l00111">diskio_device_info::first_sector</a>, <a class="el" href="a00147_source.html#l00106">diskio_device_info::num_sectors</a>, <a class="el" href="a00147_source.html#l00101">diskio_device_info::number</a>, <a class="el" href="a00147_source.html#l00104">diskio_device_info::partition</a>, <a class="el" href="a00147_source.html#l00108">diskio_device_info::sector_size</a>, and <a class="el" href="a00147_source.html#l00099">diskio_device_info::type</a>.</p>

</div>
</div>
<a class="anchor" id="ga4585cf5b3f1ef34e4067b2f14c01243a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int diskio_read_block </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="a00044.html">diskio_device_info</a> *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>block_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads one block from the specified device and stores it in buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*dev</td><td>the pointer to the device info struct </td></tr>
    <tr><td class="paramname">block_address</td><td>Which block should be read </td></tr>
    <tr><td class="paramname">*buffer</td><td>buffer in which the data is written </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DISKIO_SUCCESS on success, otherwise not 0 for an error </dd></dl>

<p>Definition at line <a class="el" href="a00146_source.html#l00103">103</a> of file <a class="el" href="a00146_source.html">diskio.c</a>.</p>

<p>Referenced by <a class="el" href="a00144_source.html#l00808">cfs_fat_mount_device()</a>, <a class="el" href="a00144_source.html#l01401">cfs_fat_sync_fats()</a>, and <a class="el" href="a00151_source.html#l00062">mbr_read()</a>.</p>

</div>
</div>
<a class="anchor" id="gab588608cb8d7018aad7878ebf3101dda"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int diskio_read_blocks </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="a00044.html">diskio_device_info</a> *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>block_start_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>num_blocks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads multiple blocks from the specified device. </p>
<p>This may or may not be supported for every device. DISKIO_ERROR_OPERATION_NOT_SUPPORTED will be returned in that case. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*dev</td><td>the pointer to the device info </td></tr>
    <tr><td class="paramname">block_start_address</td><td>the address of the first block to be read </td></tr>
    <tr><td class="paramname">num_blocks</td><td>the number of blocks to be read </td></tr>
    <tr><td class="paramname">*buffer</td><td>buffer in which the data is written </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DISKIO_SUCCESS on success, otherwise not 0 for an error </dd></dl>

<p>Definition at line <a class="el" href="a00146_source.html#l00109">109</a> of file <a class="el" href="a00146_source.html">diskio.c</a>.</p>

</div>
</div>
<a class="anchor" id="gac1d9fc25709d592d9ce57e65b5b5d9d4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void diskio_set_default_device </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="a00044.html">diskio_device_info</a> *&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the default operation device. </p>
<p>This allows to call the diskio_* functions with the dev parameter set to NULL. The functions will then use the default device to operate. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*dev</td><td>the pointer to the device info, which will be the new default device </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00146_source.html#l00317">317</a> of file <a class="el" href="a00146_source.html">diskio.c</a>.</p>

</div>
</div>
<a class="anchor" id="gac3d6337bdaa0c6f306e90578e7f32b84"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int diskio_write_block </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="a00044.html">diskio_device_info</a> *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>block_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes a single block to the specified device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*dev</td><td>the pointer to the device info </td></tr>
    <tr><td class="paramname">block_address</td><td>address where the block should be written </td></tr>
    <tr><td class="paramname">*buffer</td><td>buffer in which the data is stored </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DISKIO_SUCCESS on success, !0 on error </dd></dl>

<p>Definition at line <a class="el" href="a00146_source.html#l00115">115</a> of file <a class="el" href="a00146_source.html">diskio.c</a>.</p>

<p>Referenced by <a class="el" href="a00144_source.html#l00614">cfs_fat_flush()</a>, <a class="el" href="a00144_source.html#l01401">cfs_fat_sync_fats()</a>, and <a class="el" href="a00151_source.html#l00084">mbr_write()</a>.</p>

</div>
</div>
<a class="anchor" id="gaabdcf769998edfeeeb3cebe6fd13041d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int diskio_write_blocks_done </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="a00044.html">diskio_device_info</a> *&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start writing multiple blocks to the specified device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*dev</td><td>the pointer to the device info </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DISKIO_SUCCESS on success, !0 on error </dd></dl>

<p>Definition at line <a class="el" href="a00146_source.html#l00133">133</a> of file <a class="el" href="a00146_source.html">diskio.c</a>.</p>

<p>References <a class="el" href="a01200_source.html#l00186">NULL</a>.</p>

</div>
</div>
<a class="anchor" id="ga36f4203ba8f4de3982f9fe08602315cf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int diskio_write_blocks_next </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="a00044.html">diskio_device_info</a> *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write next of multiple blocks to the specified device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*dev</td><td>the pointer to the device info </td></tr>
    <tr><td class="paramname">*buffer</td><td>buffer in which the data is stored </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DISKIO_SUCCESS on success, !0 on error </dd></dl>

<p>Definition at line <a class="el" href="a00146_source.html#l00127">127</a> of file <a class="el" href="a00146_source.html">diskio.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga5e7b794e2afe4b0bd067c19cd393a1c2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int diskio_write_blocks_start </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="a00044.html">diskio_device_info</a> *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>block_start_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>num_blocks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start writing multiple blocks to the specified device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*dev</td><td>the pointer to the device info </td></tr>
    <tr><td class="paramname">block_start_address</td><td>the address of the first block to be written </td></tr>
    <tr><td class="paramname">num_blocks</td><td>number of blocks to be written </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DISKIO_SUCCESS on success, !0 on error </dd></dl>

<p>Definition at line <a class="el" href="a00146_source.html#l00121">121</a> of file <a class="el" href="a00146_source.html">diskio.c</a>.</p>

<p>References <a class="el" href="a01200_source.html#l00186">NULL</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Apr 24 2014 16:26:18 for Contiki-Inga 3.x by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
